{"version":3,"sources":["src/polyfill/promise-polyfill.js","src/polyfill/fetch-polyfill.js","src/script/base/polyfill.es6","src/script/base/util.es6","src/script/form/InputCount.es6","src/script/form/PikaEx.es6","src/script/form/CheckAll.es6","src/script/form/Transfer.es6","src/script/select/SelectBase.es6","src/script/select/Select.es6","src/script/select/Cascader.es6","src/script/modal/Modal.es6","src/script/modal/Message.es6","src/script/modal/Position.es6","src/script/modal/Tooltip.es6","src/script/modal/Popper.es6","src/script/modal/Layer.es6","src/script/tag/Tag.es6","src/script/validator/Validator.es6","src/script/upload/Upload.es6","src/script/upload/UploadHelper.es6","src/ui.es6"],"names":["global","factory","exports","module","define","amd","promiseFinally","callback","constructor","then","value","resolve","reason","reject","setTimeoutFunc","setTimeout","noop","bind","fn","thisArg","apply","arguments","Promise","TypeError","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","push","_immediateFn","cb","onFulfilled","onRejected","promise","ret","e","newValue","finale","length","_unhandledRejectionFn","i","len","Handler","done","ex","prototype","prom","all","arr","args","Array","slice","call","remaining","res","val","race","values","setImmediate","err","console","warn","globalNS","window","Error","support","searchParams","iterable","Symbol","blob","Blob","formData","arrayBuffer","isDataView","obj","DataView","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","indexOf","Object","toString","normalizeName","name","String","test","toLowerCase","normalizeValue","iteratorFor","items","iterator","next","shift","Headers","headers","map","forEach","append","isArray","header","getOwnPropertyNames","oldValue","get","has","hasOwnProperty","set","keys","entries","consumed","body","bodyUsed","fileReaderReady","reader","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","join","bufferClone","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","type","rejected","text","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","options","url","credentials","mode","signal","referrer","clone","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","location","DOMException","message","stack","create","fetch","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","Element","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","closest","s","el","document","documentElement","contains","parentNode","parentElement","assign","defineProperty","target","varArgs","to","index","nextSource","nextKey","writable","configurable","HTMLElement","trigger","data","event","createEvent","initEvent","eventName","dispatchEvent","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","cancelAnimFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","id","clearTimeout","util","IEVersion","agent","navigator","userAgent","match","parseInt","substring","arrLike","isEmpty","hasClass","element","className","every","item","classList","addClass","add","removeClass","remove","toggleClass","toggle","addMultiEvent","eventNames","listener","eventArray","l","on","selector","handler","createElement","attribute","html","dom","innerHTML","createId","Number","Math","random","substr","Date","now","supportPseudo","pseudoClass","_pseudoClass","ss","styleSheets","head","appendChild","removeChild","testPseudo","insertRule","deleteRule","fetchData","dataArr","dataStr","getUrl","InputCount","defaultSetting","countElementClass","inputElementSelector","settings","Util","wrap","max","getAttribute","countElement","querySelector","timer","inner","PikaEx","selectData","Pikaday","defaultSettings","valueInput","checkLabel","checkValue","pikaday","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","onSelect","date","changeValue","events","createDom","content","createContent","div","u","parent","piker","hide","select","empty","checkbox","resetSelectPosition","check","createCheckRow","createEmptyRow","createSelect","drop","listHeight","getBoundingClientRect","height","pikerHeight","selectTop","offsetTop","selectBottom","style","top","bottom","setDate","formatDate","checked","getDateValue","show","stopPropagation","label","reduce","pre","cur","toISOString","pika","querySelectorAll","CheckAll","option","groupClass","checkAllClass","nodeClass","labelClass","cache","elements","elementArr","innerText","children","getDataFromDom","splice","_item","itm","createDataCache","dealCheckChild","dealCheckParent","indeterminate","disabled","originChecked","originIndeterminate","newIndeterminate","newCheck","ele","dealCheck","Sortable","Transfer","sortable","targetList","treeList","createTeeCheck","tree","addValue","changeSelectedList","valueIndex","hasIt","concat","domString","oldIndex","newIndex","onSort","evt","changeSort","removeSelectedItem","doc","SelectBase","selectElement","selectedClass","showClass","selectShowClass","selectClass","optionClass","bottomMargin","selected","opt","last","level","str","addClassName","tpl","v","current","changeCacheValue","changeMultiSelectValue","beforeShow","preventDefault","multiple","removeMultipleTag","clearable","clearSelect","hideOption","hideOther","showOption","zIndex","rect","optionHeight","clientHeight","search","originElement","emptyLabel","Select","elementSelector","valueName","labelName","placeholder","emptyLi","group","enterable","checkable","selectFn","optionTemplate","tagClass","nodeName","nodeType","hasAttribute","getDataFromSelect","createCacheFromData","initSelect","parentId","_data","child","_child","createSelectDom","display","createOptionWrap","createDropdown","width","clientWidth","changeSelectValue","bindEvent","dataClass","selectUI","optionUI","createSearch","createOptionContent","createOptionGroup","createOptionSingle","optgroup","createOptionWithCheckbox","createOptionItem","changeCheckParent","changeCheckAll","dealMultiValue","changeMultiSelectedClass","eventType","changeOriginElementValue","changeMultiSelectLabel","createMultiTag","focus","createEnterInput","tagClassName","_v","bool","inputTimer","keyCode","checkLabels","selectClickEvent","dealSelectEnter","toggleItemSelected","changeCheck","main","con","searchDom","Cascader","optionGroupClass","ajaxUrl","dataName","selectFinalFn","complete","linkage","defaultValue","initAjaxSelect","valueArray","urlArray","initInput","initDropdownWrap","createAjaxOption","initStatus","optionClickEvent","dataInput","_width","d","code","selectFinalLevelEvent","removeNextSiblingOptions","appendAjaxOption","triggerNewItem","scrollTop","ul","changeSelectedClass","setValue","valueAll","labelAll","Modal","modal","modalBox","modalContent","modalTitle","title","close","animateClass","resize","clickOutside","closeKey","onOpen","onClose","onResize","onCancel","onConfirm","footer","cancelBtn","confirmBtn","btnOkClass","btnCancelClass","btnType","isShow","closeIcon","getConfirmTypeHtml","getModalTypeHtml","confirmButton","cancelButton","foot","resizeClass","resizeTrigger","createModalFooter","createModalHtml","modalOk","modalCancel","setContent","setTitle","toggleShowHide","getData","createConfirmHtml","resizeEvent","docEle","minHeight","minWidth","startX","startY","startWidth","startHeight","maxWidth","maxHeight","doDrag","clientX","clientY","stopDrag","desc","titHtml","descHtml","Message","duration","position","count","createAlert","alert","msg","_type","createDomString","Position","gap","targetElement","left","pos","targetHeight","offsetHeight","targetWidth","offsetWidth","targetLeft","scrollX","targetTop","scrollY","elementHeight","elementWidth","x","y","setPositionMiddle","setPositionVertical","setPositionHorizontal","sty","h","t","Tooltip","showEvent","hideEvent","template","showTooltip","destroyTooltip","tooltip","noTooltip","scrollWidth","createTooltipElement","setPosition","dataTip","tooltipElement","tip","poppers","Popper","hideOthers","createPopper","popper","destroy","Layer","defaults","layer","confirmType","createLayer","layerHead","layerContent","htmlString","Tag","inputType","editable","valueSelector","onDeleteFn","tags","list","createTagList","createInput","addTags","addValueToInput","addTagValue","appendTag","createTagDom","firstElementChild","removeTagValue","removeTag","chinese","email","english","idCard","mobile","number","phone","qq","weChat","tel","time","required","int","regs","rule","price","password","passport","testReg","is_email","is_english","is_chinese","is_number","is_idCard","is_int","field","validity","badInput","is_mobile","is_price","is_qq","is_weChat","is_tel","is_time","is_passport","is_url","is_required","is_reg","reg","RegExp","is_password","is_not","getCheckedCheckbox","cl","is_max","is_min","is_phone","is_remote","urlArr","hasValue","itemName","inputName","charAt","is_same","eleValue","is_diff","is_gt","is_gte","is_gtnum","is_gtenum","is_ltnum","is_ltenum","Validator","_selector","_fields","_settings","_callback","_errorCallback","fields","errorCallback","wrapClass","validClass","errorClass","successClass","loadClass","tipElement","tipClass","realTime","shouldFresh","scrollToError","addFields","delegateBlur","delegateFocus","validAllFiles","addItems","validForm","valid","__fields","__form","__settings","scrollLeft","scrollTo","checkValid","remote","rules","rulesToObject","msgs","createErrorTip","fieldItem","addBlurEvent","addFocusEvent","node","addedClass","filed","addItem","isRadioOrCheckbox","validField","addFocus","removeErrorClass","tipEle","getAttrChecked","remoteOk","validResult","showErrorTip","showSuccessTip","attr","rulesArray","rulesObject","msgArray","r","ruleName","ruleValue","ruleMsg","isObject","errorMessage","InternalError","InvalidFileExtensionError","InvalidFileTypeError","MaxFileSizeError","RequestError","UnsupportedError","MultipleUnsupportedError","Upload","files","limit","maxSize","fileType","fileName","dataType","maxUploads","beforeInit","start","beforeUploadStart","beforeUpload","progress","success","cancel","finish","uploads","uploadContexts","_uploadData","queuedFilesCount","activeUploads","_files","fileNum","countFileNum","initUploadContext","initRemaining","queueUpload","setUploadState","min","state","file","pop","getUploadState","num","stateText","validFile","validExtension","getFileExtension","lastIndexOf","_name","validateFileExtension","validateFileSize","uploadNext","upload","uploadNum","uploadFile","k","objectToFormData","_xhr","lengthComputable","loaded","total","pro","fileComplete","errObj","filename","dotPos","size","UploadHelper","dragEvents","singleUpload","inputEvent","image","createUpload","dataTransfer","ui"],"mappings":"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","file":"ui.6b26f7aa.map","sourceRoot":"..","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n      (factory());\n}(this, (function () { 'use strict';\n\n  var promiseFinally = function(callback) {\n    var constructor = this.constructor;\n    return this.then(\n      function(value) {\n        return constructor.resolve(callback()).then(function() {\n          return value;\n        });\n      },\n      function(reason) {\n        return constructor.resolve(callback()).then(function() {\n          return constructor.reject(reason);\n        });\n      }\n    );\n  };\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n\n// Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function() {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (!(this instanceof Promise))\n      throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function() {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self)\n        throw new TypeError('A promise cannot be resolved with itself.');\n      if (\n        newValue &&\n        (typeof newValue === 'object' || typeof newValue === 'function')\n      ) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function() {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(\n        function(value) {\n          if (done) return;\n          done = true;\n          resolve(self, value);\n        },\n        function(reason) {\n          if (done) return;\n          done = true;\n          reject(self, reason);\n        }\n      );\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function(onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function(onFulfilled, onRejected) {\n    var prom = new this.constructor(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.prototype['finally'] = promiseFinally;\n\n  Promise.all = function(arr) {\n    return new Promise(function(resolve, reject) {\n      if (!arr || typeof arr.length === 'undefined')\n        throw new TypeError('Promise.all accepts an array');\n      var args = Array.prototype.slice.call(arr);\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(\n                val,\n                function(val) {\n                  res(i, val);\n                },\n                reject\n              );\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function(value) {\n    if (value && typeof value === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function(resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function(value) {\n    return new Promise(function(resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function(values) {\n    return new Promise(function(resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n// Use polyfill for setImmediate for performance gains\n  Promise._immediateFn =\n    (typeof setImmediate === 'function' &&\n      function(fn) {\n        setImmediate(fn);\n      }) ||\n    function(fn) {\n      setTimeoutFunc(fn, 0);\n    };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  var globalNS = (function() {\n    // the only reliable means to get the global object is\n    // `Function('return this')()`\n    // However, this causes CSP violations in Chrome apps.\n    if (typeof self !== 'undefined') {\n      return self;\n    }\n    if (typeof window !== 'undefined') {\n      return window;\n    }\n    if (typeof global !== 'undefined') {\n      return global;\n    }\n    throw new Error('unable to locate global object');\n  })();\n\n  if (!globalNS.Promise) {\n    globalNS.Promise = Promise;\n  } else if (!globalNS.Promise.prototype['finally']) {\n    globalNS.Promise.prototype['finally'] = promiseFinally;\n  }\n\n})));\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n  'FileReader' in self &&\n  'Blob' in self &&\n  (function() {\n    try {\n      new Blob()\n      return true\n    } catch (e) {\n      return false\n    }\n  })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nfunction Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      throw new Error('unsupported BodyInit type')\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nfunction Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'omit'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nfunction Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nvar DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nfunction fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n\n","// https://developer.mozilla.org/zh-CN/docs/Web/API/Element/closest\nif (!Element.prototype.matches) {\n  Element.prototype.matches = Element.prototype.msMatchesSelector\n    || Element.prototype.webkitMatchesSelector\n    || Element.prototype.mozMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n  Element.prototype.closest = function (s) {\n    let el = this;\n    if (!document.documentElement.contains(el)) return null;\n    if (!Element.prototype.matches) {\n      return el.parentNode;\n    }\n    do {\n      if (el.matches(s)) return el;\n      el = el.parentElement;\n    } while (el !== null);\n    return null;\n  };\n}\n\nif (typeof Object.assign !== 'function') { // for IE\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, 'assign', {\n    /* eslint-disable-next-line */ \n    value: function assign(target, varArgs) { // .length of function is 2 \n      if (target == null) { // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n      let to = Object(target);\n      for (let index = 1; index < arguments.length; index += 1) {\n        let nextSource = arguments[index];\n        if (nextSource != null) { // Skip over if undefined or null\n          for (let nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}\n\nHTMLElement.prototype.trigger = function (type, data) {\n  const event = document.createEvent('HTMLEvents');\n  event.initEvent(type, true, true);\n  event.data = data || {};\n  event.eventName = type;\n  this.dispatchEvent(event);\n  return this;\n};\n\nwindow.requestAnimFrame = (function () {\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function (callback) {\n      window.setTimeout(callback, 1000 / 60);\n    }\n  );\n}());\n\nwindow.cancelAnimFrame = (function () {\n  return (\n    window.cancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.oCancelAnimationFrame ||\n    window.msCancelAnimationFrame ||\n    function (id) {\n      window.clearTimeout(id);\n    }\n  );\n}());\n","const util = {\n  IEVersion() {\n    const agent = window.navigator.userAgent;\n    const index = agent.indexOf('MSIE');\n\n    return index > 0 || agent.match(/Trident.*rv:11\\./)\n      ? parseInt(agent.substring(index + 5, agent.indexOf('.', index)), 10)\n      : 999;\n  },\n\n  forEach(arrLike, callback) {\n    [].slice.call(arrLike).forEach(callback);\n  },\n\n  isEmpty(value) {\n    return value === undefined ||\n            value === null ||\n            (typeof value === 'object' && Object.keys(value).length === 0) ||\n            (typeof value === 'string' && value.trim().length === 0);\n  },\n\n  hasClass(element, className) {\n    if (!element) return false;\n\n    if (!element.className) return false;\n    \n    return className.match(/(\\w|-)+/g).every(function (item) {\n      return element.classList.contains(item);\n    });\n  },\n\n  // addClass removeClass toggleClass ie10+\n  addClass(element, className) {\n    if (!element || !className) return;\n\n    if (element.classList) {\n      className.match(/(\\w|-)+/g).forEach(item => {\n        element.classList.add(item);\n      });\n    }\n  },\n\n  removeClass(element, className) {\n    if (!element || !className) return;\n\n    if (element.classList) {\n      className.match(/(\\w|-)+/g).forEach(item => {\n        element.classList.remove(item);\n      });\n    }\n  },\n\n  toggleClass(element, className) { \n    if (!element || !className) return;\n\n    if (element.classList) {\n      className.match(/(\\w|-)+/g).forEach(item => {\n        element.classList.toggle(item);\n      });\n    }\n  },\n\n  addMultiEvent(element, eventNames, listener) {\n    const eventArray = eventNames.split(' ');\n    for (let i = 0, l = eventArray.length; i < l; i += 1) {\n      element.addEventListener(eventArray[i], listener, false);\n    }\n  },\n\n  on(element, eventName, selector, handler) {\n    this.addMultiEvent(element, eventName, event => {\n      for (let target = event.target; target && target !== element; target = target.parentNode) {\n        if (target.matches(selector)) {\n          handler.call(target, event);\n          break;\n        }\n      }\n    });\n  },\n\n  /**\n   * @param {string} type - element type\n   * @param {object} attribute - element attributes\n   * @param {string} html - innerHTML\n   * @returns {HTMLElement}\n   * */\n  createElement(type, attribute = {}, html = '') {\n    const dom = document.createElement(type);\n    for (let i in attribute) {\n      if (Object.prototype.hasOwnProperty.call(attribute, i)) {\n        dom[i] = attribute[i];\n      }\n    }\n    try {\n      dom.innerHTML = html;\n    } catch (e) {\n      console.warn('innerHTML error');\n    }\n    return dom;\n  },\n\n  createId() {\n    return Number(Math.random().toString().substr(3, 3) + Date.now()).toString(36);\n  },\n\n  supportPseudo(pseudoClass) {\n    // from https://gomakethings.com/testing-for-css-pseudo-class-support-with-vanilla-javascript/\n    // Get the document stylesheet\n    let _pseudoClass = pseudoClass;\n    let ss = document.styleSheets[0];\n\n    // Create a stylesheet if one doesn't exist\n    if (!ss) {\n      let el = document.createElement('style');\n      document.head.appendChild(el);\n      ss = document.styleSheets[0];\n      document.head.removeChild(el);\n    }\n\n    // Test the pseudo-class by trying to style with it\n    let testPseudo = function () {\n      try {\n        if (!(/^:/).test(pseudoClass)) {\n          _pseudoClass = ':' + pseudoClass;\n        }\n        ss.insertRule('html' + _pseudoClass + '{}', 0);\n        ss.deleteRule(0);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    };\n\n    // Run the test\n    return testPseudo();\n  },\n\n  /**\n   * @param {String} url - request url\n   * @param {Object} data - request data\n   * @param {String} method  - request method\n   * @param {Object} header\n   * @returns {Promise}\n   * */\n  fetchData(url, data = {}, method = 'GET', header = { 'Content-Type': 'application/x-www-form-urlencoded' }) {\n    let dataArr = [];\n    let dataStr = '';\n\n    for (let i in data) {\n      if (Object.prototype.hasOwnProperty.call(data, i)) {\n        dataArr.push(`${i}=${data[i]}`);\n      }\n    }\n\n    dataStr = dataArr.join('&');\n\n    if (method === 'POST') {\n      return fetch(url, {\n        method: method,\n        headers: header,\n        body: dataStr\n        // credentials: 'include'\n      }).then(res => {\n        if (res.status) {\n          return res.json();\n        }\n        throw new Error('post data fetch error!');\n      });\n    }\n\n    let getUrl = url;\n\n    if (dataStr) {\n      getUrl = url.indexOf('?') > 0 ? `${url}&${dataStr}` : `${url}?${dataStr}`;\n    }\n\n    return fetch(getUrl, {\n      // credentials: 'include'\n    }).then(res => {\n      if (res.status) {\n        return res.json();\n      }\n      throw new Error('get data fetch error!');\n    });\n  }\n};\n\n\nexport default util;\n","\nimport Util from '../base/util.es6';\n\nclass InputCount {\n  constructor(selector, options) {\n    const defaultSetting = {\n      countElementClass: '.count',\n      inputElementSelector: '.ui-form-control'\n    };\n\n    const settings = Object.assign({}, defaultSetting, options);\n    \n    this.settings = settings;\n\n    this.init(selector);\n  }\n\n  init(selector) {\n    const { countElementClass, inputElementSelector } = this.settings;\n\n    Util.on(document, 'input', selector + ' ' + inputElementSelector, function () {\n      const input = this;\n      const wrap = input.closest(selector);\n      const max = input.getAttribute('maxlength');\n      let countElement = wrap.querySelector(countElementClass);\n\n      let timer = this.timer;\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        const value = this.value.trim();\n        const length = value.length;\n\n        countElement.innerHTML = length > max\n          ? `<em class=\"ft-error\">${length}</em>/${max}`\n          : `${length}/${max}`;\n      }, 500);\n    });\n  }\n\n  createCountElement(inner) {\n    const { countElementClass } = this.settings;\n    return Util.createElement('span', { className: countElementClass }, inner);\n  }\n}\n\nexport default InputCount;\n","import u from '../base/util.es6';\n\nclass PikaEx {\n  constructor(selector, options, selectData, Pikaday) {\n    const defaultSettings = {\n      valueInput: '1',\n      checkLabel: '到达时自动执行活动',\n      checkValue: '2020-01-01'\n    };\n\n    this.selectData = selectData;\n    this.settings = Object.assign({}, defaultSettings, options);\n\n    this.pikaday = new Pikaday({\n      i18n: {\n        previousMonth: '<',\n        nextMonth: '>',\n        months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n        weekdays: ['日', '一', '二', '三', '四', '五', '六'],\n        weekdaysShort: ['日', '一', '二', '三', '四', '五', '六']\n      },\n      onSelect: (date) => {\n        this.changeValue(date);\n      }\n    });\n\n    this.init(selector);\n    this.events();\n  }\n\n  init(selector) {\n    if (typeof selector === 'string') {\n      this.element = document.querySelector(selector);\n    }\n\n    if (typeof selector === 'object') {\n      this.element = selector;\n    }\n\n    if (!this.element) return;\n    \n    this.value = null;\n\n    this.createDom();\n  }\n\n  createDom() {\n    const content = this.createContent();\n\n    const div = u.createElement('div', { className: 'ui-pika' }, content);\n    const parent = this.element.closest('.ui-control-wrap');\n\n    this.piker = parent.appendChild(div);\n    this.piker.hide = this.hide.bind(this.piker, this.element);\n    \n    this.piker.querySelector('.pika-container').appendChild(this.pikaday.el);\n\n    this.select = this.piker.querySelector('.option-select');\n    this.empty = this.piker.querySelector('.option-empty');\n    this.checkbox = this.piker.querySelector('input');\n\n    this.resetSelectPosition();\n  }\n\n  createContent() {\n    const { selectData } = this;\n    const { checkLabel, checkValue } = this.settings;\n\n    const check = PikaEx.createCheckRow(checkLabel, checkValue);\n    const empty = PikaEx.createEmptyRow();\n    const select = PikaEx.createSelect('指定活动结束后开始', selectData);\n    return '<div class=\"pika-container\"></div>' + check + select + empty;\n  }\n\n  static createSelect(label, data) {\n    return `<div class=\"option-row option-select\">\n              <div class=\"select-label\">${label}</div>\n              <div class=\"select-dropdown\">\n                <div class=\"ui-menu\">\n                  <ul>` \n              + data.reduce((pre, cur) => {\n                const { label: name, value } = cur;\n                const date = PikaEx.getDateValue(value);\n                return pre + `<li class=\"menu-item\" data-value=\"${date}\">${name}</li>`;\n              }, '')\n    + '</ul></div></div></div>';\n  }\n\n  static createCheckRow(label, value) {\n    const date = PikaEx.getDateValue(value);\n    return `<div class=\"option-row option-check\"><label class=\"ui-checkbox\"><input type=\"checkbox\" class=\"pika-check\" value=\"${date}\"/><i class=\"iconfont\"></i><span>${label}</span></label></div>`;\n  }\n\n  static createEmptyRow() {\n    return '<div class=\"option-row option-empty menu-item\">无</div>';\n  }\n\n  resetSelectPosition() {\n    const { piker, select } = this;\n    const drop = select.querySelector('.select-dropdown');\n    const listHeight = drop.getBoundingClientRect().height;\n    const pikerHeight = piker.getBoundingClientRect().height;\n    const selectTop = select.offsetTop;\n    const selectBottom = pikerHeight - selectTop;\n\n    if (listHeight > pikerHeight) {\n      drop.style.top = '0';\n    } else if (listHeight <= selectBottom) {\n      drop.style.top = selectTop + 'px';\n    } else {\n      drop.style.bottom = '0';\n    }\n  }\n\n  hide(element) {\n    u.removeClass(this, 'show');\n    u.removeClass(element, 'active');\n  }\n\n  show() {\n    u.addClass(this.element, 'active');\n    u.addClass(this.piker, 'show');\n    const { value } = this;\n\n    if (value) {\n      this.pikaday.setDate(value, true);\n    }\n  }\n\n  static formatDate(date) {\n    return new Date(+new Date(date) + (8 * 3600 * 1000)).toISOString().slice(0, 10);\n  }\n\n  static getDateValue(date) {\n    if (date instanceof Date) {\n      return PikaEx.formatDate(date);\n    }\n    if (typeof date === 'string') {\n      return date;\n    }\n\n    if (typeof date === 'number') {\n      return PikaEx.formatDate(date);\n    }\n\n    return '';\n  }\n\n  changeValue(element) {\n    const { checkbox, piker } = this;\n\n    u.removeClass(piker.querySelector('.selected'), 'selected');\n\n    if (element instanceof Date) {\n      this.value = PikaEx.formatDate(element);\n      checkbox.checked = false;\n    } else if (element === checkbox) {\n      this.value = element.checked ? PikaEx.getDateValue(element.value) : '';\n    } else if (u.hasClass(element, 'menu-item')) {\n      u.addClass(element, 'selected');\n      checkbox.checked = false;\n      this.value = element.getAttribute('data-value');\n    }\n    \n    this.element.value = this.value;\n    this.hide();\n  }\n\n  events() {\n    const self = this;\n    const { element, piker, select } = this;\n\n    element.addEventListener('click', function (e) {\n      if (u.hasClass(piker, 'show')) {\n        piker.hide();\n      } else {\n        self.show();\n      }\n      e.stopPropagation();\n    });\n\n    u.on(piker, 'click', '.menu-item', function () {\n      self.changeValue(this);\n    });\n\n    u.on(piker, 'change', '.pika-check', function () {\n      self.changeValue(this);\n    });\n\n    let timer = null;\n    select.addEventListener('mouseenter', function () {\n      clearTimeout(timer);\n      u.addClass(this, 'show');\n    });\n\n    select.querySelector('.select-label').addEventListener('click', function (e) {\n      e.stopPropagation();\n    });\n\n    u.on(piker, 'click', '.pika-container', function (e) {\n      e.stopPropagation();\n    });\n\n    select.addEventListener('mouseleave', function () {\n      timer = setTimeout(() => {\n        u.removeClass(this, 'show');\n      }, 400);\n    });\n  }\n}\n\ndocument.body.addEventListener('click', function () {\n  const pika = document.querySelectorAll('.ui-pika');\n\n  u.forEach(pika, item => {\n    item.hide();\n  });\n});\n\nexport default PikaEx;\n","import u from '../base/util.es6';\n\nclass CheckAll {\n  constructor(selector, option) {\n    const defaultSettings = {\n      groupClass: 'tree-group',\n      checkAllClass: 'check-all',\n      nodeClass: 'tree-node',\n      labelClass: 'node-label'\n    };\n    this.settings = Object.assign({}, defaultSettings, option);\n    this.init(selector);\n  }\n  \n  init(selector) {\n    let element = selector;\n\n    if (typeof selector === 'string') {\n      element = document.querySelector(selector);\n    }\n\n    if (!element) return;\n\n    this.element = element;\n\n\n    this.cache = {};\n    this.data = [];\n    this.value = [];\n\n    this.events();\n  }\n\n  getDataFromDom(element) {\n    const { groupClass, nodeClass, labelClass } = this.settings;\n    let elements = element;\n\n    if (typeof elements === 'object' && !elements.length) {\n      elements = [element];\n    }\n\n    let elementArr = [].slice.call(elements);\n\n    if (u.hasClass(elementArr[0], labelClass)) {\n      const input = elementArr[0].querySelector('input');\n      const { value } = input;\n      const label = input.parentNode.innerText || '';\n\n      return {\n        label,\n        value: value || u.createId(),\n        checkbox: input,\n        children: this.getDataFromDom(elementArr.splice(1))\n      };\n    }\n\n    return elementArr.map(item => {\n      if (u.hasClass(item, groupClass)) {\n        return this.getDataFromDom(item.children);\n      }\n\n      if (u.hasClass(item, nodeClass)) {\n        const input = item.querySelector('input');\n        const { value } = input;\n        const label = input.parentNode.innerText || '';\n      \n        return {\n          label,\n          value,\n          checkbox: input\n        };\n      }\n\n      return null;\n    });\n  }\n\n  createDataCache(data, parent) {\n    data.forEach(item => {\n      const { checkbox, value, children, label } = item;\n\n      const _item = {\n        label,\n        value,\n        checkbox\n      };\n\n      if (parent) {\n        _item.parent = parent;\n      }\n\n      if (children) {\n        _item.children = children.map(itm => itm.value);\n        this.createDataCache(children, value);\n      }\n\n      this.cache[value] = _item;\n    });\n  }\n\n  dealCheck(item) {\n    this.dealCheckChild(item);\n    this.dealCheckParent(item);\n  }\n\n  dealCheckChild(item) {\n    const checked = item.checkbox.checked;\n    const { cache } = this;\n\n    if (item.children) {\n      item.children.forEach(val => {\n        const _item = cache[val];\n        const { checkbox } = _item;\n        if (checked) {\n          checkbox.indeterminate = false;\n        }\n        if (checkbox.checked !== checked && !checkbox.disabled) {\n          checkbox.checked = checked;\n          this.dealCheckChild(_item);\n        }\n      });\n    }\n  }\n\n  dealCheckParent(item) {\n    const { cache } = this;\n\n    if (item.parent) {\n      const _item = cache[item.parent];\n      const { children, checkbox } = _item;\n\n      const originChecked = checkbox.checked;\n      const originIndeterminate = checkbox.indeterminate;\n\n      let check = true;\n      let indeterminate = false;\n\n      children.forEach(val => {\n        const itm = cache[val];\n        if (itm.checkbox.checked) {\n          indeterminate = true;\n        } else if (itm.checkbox.indeterminate) {\n          indeterminate = true;\n          check = false;\n        } else {\n          check = false;\n        }\n      });\n\n      const newIndeterminate = !check && indeterminate;\n      let newCheck = check && !newIndeterminate;\n\n      checkbox.indeterminate = newIndeterminate;\n      checkbox.checked = newCheck;\n      \n      if (originChecked !== newCheck || originIndeterminate !== newIndeterminate) {\n        this.dealCheckParent(_item);\n      }\n    }\n  }\n\n  changeValue() {\n    const { cache } = this;\n    this.value = [];\n    Object.keys(cache).forEach(key => {\n      const { label, value, checkbox, children } = cache[key];\n      \n      if (checkbox.checked && !children) {\n        this.value.push({\n          label,\n          value\n        });\n      }\n    });\n  }\n\n  events() {\n    const { element } = this;\n\n    let ele = element;\n\n    // if (!u.hasClass(ele, 'ui-tree')) {\n    //   ele = this.element.querySelector('.ui-tree');\n    // }\n\n    this.data = this.getDataFromDom(ele.children);\n    \n    this.createDataCache(this.data);\n\n    const self = this;\n\n    u.on(element, 'change', 'input', function () {\n      const value = this.value;\n      const item = self.cache[value];\n      \n      self.dealCheck(item);\n      self.changeValue();\n      element.trigger('tree-change');\n    });\n  }\n}\n\n\nexport default CheckAll;\n","import u from '../base/util.es6';\nimport CheckAll from './CheckAll.es6';\n// need Sortable js\nlet Sortable;\n\nclass Transfer {\n  constructor(selector, options, sortable) {\n    const defaultSettings = {};\n\n    this.settings = Object.assign({}, defaultSettings, options);\n\n    Sortable = sortable;\n    this.init(selector);\n  }\n\n  init(selector) {\n    let element = selector;\n\n    if (typeof selector === 'string') {\n      element = document.querySelector(selector);\n    }\n\n    if (!(element && element instanceof HTMLElement)) {\n      throw new Error('need element');\n    }\n\n    this.element = element;\n\n    this.targetList = element.querySelector('.select-list');\n    this.treeList = element.querySelector('.ui-tree');\n\n    this.value = [];\n\n    this.createTeeCheck();\n  }\n\n  createTeeCheck() {\n    const { element } = this;\n    const tree = element.querySelector('.ui-tree');\n\n    this.tree = new CheckAll(tree);\n\n    this.value = [];\n\n    this.events();\n  }\n\n  changeValue(newValue) {\n    const { value } = this;\n    const _value = [];\n    const addValue = [];\n\n    if (!value.length) {\n      this.value = newValue;\n      this.changeSelectedList();\n      return;\n    }\n\n    const valueIndex = [];\n    \n    newValue.forEach(item => {\n      let hasIt = false;\n\n      value.forEach((itm, index) => {\n        if (hasIt) return;\n\n        if (item.value === itm.value) {\n          hasIt = true;\n          valueIndex.push(index);\n        }\n      });\n\n      if (!hasIt) {\n        addValue.push(item);\n      }      \n    });\n\n    value.forEach((item, index) => {\n      if (valueIndex.indexOf(index) > -1) {\n        _value.push(item);\n      }\n    });\n\n    this.value = _value.concat(addValue);\n    this.changeSelectedList();\n  }\n\n  changeSelectedList() {\n    const { targetList, value } = this;\n    const domString = value.reduce((pre, cur) => {\n      return pre + `<div class=\"transfer-item\" data-value=\"${cur.value}\"><span class=\"name\">${cur.label}</span><span class=\"delete iconfont icon-times\"></span></div>`;\n    }, '');\n\n    targetList.innerHTML = domString;\n  }\n\n  removeSelectedItem(ele) {\n    const item = ele.closest('.transfer-item');\n    const value = item.getAttribute('data-value');\n    const input = this.treeList.querySelector(`input[value=\"${value}\"]`);\n\n    input.checked = false;\n    input.trigger('change');\n  }\n\n  changeSort(oldIndex, newIndex) {\n    const { value } = this;\n\n    value.splice(newIndex, 0, value.splice(oldIndex, 1)[0]);\n  }\n\n  destroy() {\n    this.element = null;\n    this.targetList = null;\n    this.treeList = null;\n    this.tree = null;\n  }\n\n  events() {\n    const self = this;\n    const { tree, element, targetList } = this;\n\n    new Sortable(targetList, {\n      onSort(evt) {\n        const { oldIndex, newIndex } = evt;\n        self.changeSort(oldIndex, newIndex);\n      }\n    });\n\n    u.on(element, 'tree-change', '.ui-tree', function () {\n      self.changeValue(tree.value);\n    });\n\n    u.on(element, 'click', '.icon-times', function () {\n      self.removeSelectedItem(this);\n    });\n  }\n}\n\nexport default Transfer;\n","import u from '../base/util.es6';\n\nconst doc = document;\n\nclass SelectBase {\n  constructor(options) {\n    const defaultSettings = {\n      selectElement: 'div',\n      selectedClass: 'selected',\n\n      showClass: 'show',\n\n      selectShowClass: 'ui-select-active',\n      selectClass: 'ui-select ui-form-control',\n\n      optionClass: 'ui-select-dropdown hide',\n\n      bottomMargin: 0\n\n    };\n\n    this.settings = Object.assign({}, defaultSettings, options);\n  }\n\n  /**\n   * @method\n   * @param {Boolean} selected  - selected status\n   * @param {String} value - option value\n   * @param {String} label - option text\n   * @returns {String}  new option html\n   * */\n  createOptionItem({ selected, value, label, disabled }, option) {\n    const { selectedClass } = this.settings;\n    let className = selected ? selectedClass : '';\n    let opt = option || {};\n    let last;\n    let level = '';\n    let str = label;\n    let addClassName = '';\n    if (opt.level) {\n      last = level === this.max ? 'data-last' : '';\n      level = opt.level;\n    }\n\n    if (opt.tpl) {\n      str = opt.tpl;\n    }\n\n    if (opt.className) {\n      addClassName = opt.className;\n    }\n\n    if (value === '') {\n      return '';\n    }\n\n    if (disabled) {\n      className += ' disabled';\n    }\n\n    const { value: v } = this;\n    if (v && (v.indexOf(value + '') > -1 || v.indexOf(value) > -1)) {\n      className = selectedClass;\n    }\n\n    return `<li class=\"menu-item ${className} ${addClassName}\" data-value=\"${value}\" data-level=\"${level}\" ${last}>${str}</li>`;\n  }\n\n  /**\n   * @method\n   * change selected option     in Cascader ColorPicker\n   * @param {HTMLElement} option\n   * @param {HTMLElement} current\n   * */\n  changeSelectedClass(option, current) {\n    const { selectedClass } = this.settings;\n    const elements = option.querySelectorAll(`.${selectedClass}`);\n\n    u.forEach(elements, item => {\n      u.removeClass(item, selectedClass);\n    });\n\n    u.addClass(current, selectedClass);\n  }\n\n  removeMultipleTag(element) {\n    const value = element.getAttribute('data-value');\n\n    this.changeCacheValue(value, false);\n    this.changeMultiSelectValue(true);\n  }\n\n  /**\n   * @method\n   * bind click event\n   * @param {HTMLElement|Node|Object} select\n   * @param {function} [beforeShow = null]\n   * */\n  selectClickEvent(select, beforeShow) {\n    const self = this;\n\n    select.addEventListener('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const target = e.target;\n\n      if (self.multiple && u.hasClass(target, 'js-del-selected')) {\n        self.removeMultipleTag(target);\n        return;\n      }\n\n      if (self.clearable && u.hasClass(target, 'icon-clean')) {\n        self.clearSelect();\n        return;\n      }\n\n      if (this.show) {\n        self.hideOption(select);\n      } else {\n        self.hideOther(select);\n\n        if (beforeShow && typeof beforeShow === 'function') {\n          beforeShow(select);\n        }\n\n        self.showOption(select);\n      }\n    }, false);\n  }\n\n  /**\n   * @method\n   * hide other select's option\n   * @param {HTMLElement} select\n   * */\n  hideOther(select) {\n    const selectShowClass = this.settings.selectShowClass;\n    const selector = doc.querySelectorAll(`.${selectShowClass}`);\n\n    u.forEach(selector, item => {\n      if (item !== select) this.hideOption(item);\n    });\n  }\n\n  /**\n   * @method\n   * display select option\n   * @param {Object} select\n   * */\n  showOption(select) {\n    const { selectShowClass, showClass, bottomMargin } = this.settings;\n    const element = select;\n    const option = select.option;\n    \n    option.style.zIndex = '100';\n\n    u.addClass(option, showClass);\n    u.addClass(select, selectShowClass);\n\n    const rect = select.getBoundingClientRect();\n    const { height, top } = rect;\n    const optionHeight = option.children[0].clientHeight;\n\n    if (top\n      && (top > optionHeight)\n      && (top > doc.documentElement.clientHeight - optionHeight - height - bottomMargin)\n    ) {\n      option.style.top = 'auto';\n      option.style.bottom = height + 3 + 'px';\n    } else {\n      option.style.bottom = 'auto';\n    }\n\n    if (this.search) {\n      const search = select.option.querySelector('.ui-form-control');\n      \n      if (search && search.value !== '') {\n        search.value = '';\n        search.trigger('input');\n      }\n    }\n    \n    element.show = true;\n  }\n\n  /**\n   * hide option\n   * @param {Object} select\n   * @param {String} className\n   * */\n  hideOption(select) {\n    const { selectShowClass, showClass } = this.settings;\n    const element = select;\n    const option = select.option;\n\n    u.removeClass(select, selectShowClass);\n    u.removeClass(option, showClass);\n\n    element.show = false;\n  }\n\n  /**\n   * change text and value\n   * @param {Object} select\n   * @param {String} value\n   * @param {String} label\n   * @param {Boolean} show\n   * @param {String} type\n   * */\n  changeSelectValue(select, value, label, show = false, type = 'change') {\n    const element = select;\n\n    element.innerHTML = label;\n\n    if (this.clearable && value) {\n      element.innerHTML = label + '<i class=\"iconfont icon-clean\"></i>';\n    }\n\n    element.originElement.value = value;\n    element.originElement.trigger(type);\n\n    if (!show) {\n      this.hideOption(select);\n    }\n  }\n\n  clearSelect() {\n    const { select } = this;\n    \n    select.innerHTML = this.settings.emptyLabel;\n    select.originElement.value = '';\n    select.originElement.trigger('change');\n\n    this.value = [];\n\n    u.forEach(select.option.querySelectorAll('.selected'), item => {\n      u.removeClass(item, 'selected');\n    });\n  }\n}\n\n\ndoc.addEventListener('click', () => {\n  const elements = doc.querySelectorAll('.ui-select-active');\n  [].slice.call(elements).forEach(item => {\n    const select = item;\n    const option = select.option;\n\n    u.removeClass(select, 'ui-select-active');\n    u.removeClass(option, 'show');\n\n    select.show = false;\n\n    setTimeout(function () {\n      option.style.zIndex = 0;\n    }, 200);\n  });\n});\n\nexport default SelectBase;\n","import u from '../base/util.es6';\nimport SelectBase from './SelectBase.es6';\n\nclass Select extends SelectBase {\n  constructor(elementSelector, options) {\n    const defaultSettings = {\n      selectedClass: 'selected',\n\n      showClass: 'show',\n\n      selectClass: 'ui-select ui-form-control',\n      optionClass: 'ui-select-dropdown hide',\n\n      valueName: 'value',\n      labelName: 'label',\n\n      placeholder: '',\n      emptyLabel: '<span class=\"ft-light select-empty\">请选择</span>',\n      emptyLi: '暂无选项',\n\n      group: false,\n      clearable: false,\n      multiple: false,\n      enterable: false,\n      max: null,\n      checkable: false,\n      search: false,\n\n      data: null,\n      selectFn: null,\n      optionTemplate: null, // function \n      tagClass: null // function or string\n    };\n\n    const settings = Object.assign({}, defaultSettings, options);\n\n    if (settings.placeholder) {\n      settings.emptyLabel = '<span class=\"ft-light select-empty\">' + settings.placeholder + '</span>';\n    }\n\n    super(settings);\n\n    this.init(elementSelector);\n  }\n\n  /**\n   * @method\n   * @param {NodeList} element\n   * \n   * \n   * this.data  [{label, value, selected[boolean]}]\n   * this.cache {id: {label, value}}\n   * */\n  init(ele) {\n    let element = ele;\n    if (!element) return;\n\n    let nodeName = element.nodeName.toLowerCase();\n    if ((nodeName !== 'select') && (nodeName !== 'input')) return;\n\n    this.value = [];\n    this.cache = {};\n    this.nodeType = nodeName;\n\n    const { data, group, max, search, checkable, clearable, enterable, multiple } = this.settings;\n\n    this.data = data;\n    this.multiple = multiple;\n    this.max = max;\n    this.group = group;\n    this.search = search;\n    this.checkable = checkable;\n    this.clearable = clearable;\n    this.enterable = enterable;\n\n    if (element.multiple || element.hasAttribute('data-multiple')) {\n      this.multiple = true;\n    }\n\n    if (element.hasAttribute('data-max')) {\n      this.max = Number(element.getAttribute('data-max'));\n    }\n\n    if (element.querySelector('optgroup')) {\n      this.group = true;\n    }\n\n    if (element.hasAttribute('data-search')) {\n      this.search = true;\n    }\n\n    if (element.hasAttribute('data-checkable')) {\n      this.checkable = true;\n    }\n\n    if (element.hasAttribute('data-clearable')) {\n      this.clearable = true;\n    }\n\n    if (element.hasAttribute('data-enterable')) {\n      this.enterable = true;\n    }\n\n    if (element.hasAttribute('data-placeholder')) {\n      this.settings.placeholder = element.getAttribute('data-placeholder');\n      this.settings.emptyLabel = '<span class=\"ft-light select-empty\">' \n        + this.settings.placeholder\n        + '</span>';\n    }\n\n    if (!this.data) {\n      this.data = this.getDataFromSelect(element);\n    } else {\n      this.createCacheFromData(this.data);\n    }\n\n    this.initSelect(element);\n  }\n\n  getDataFromSelect(element, parentId) {\n    const elements = element.children;\n\n    return [].slice.call(elements).map(item => {\n      const nodeName = item.nodeName.toLowerCase();\n      if (nodeName === 'option') {\n        const { label, value, selected, disabled } = item;\n        const _data = { label, value, disabled }; // 去掉了selected\n\n        if (selected) {\n          this.value.push(item.value);\n        }\n\n        if (parentId) {\n          _data.parent = parentId;\n        }\n\n        this.cache[value] = _data;\n        return _data;\n      } if (nodeName === 'optgroup') {\n        const id = u.createId();\n        const child = [].slice.call(item.children).map(itm => itm.value);\n        this.cache[id] = child;\n\n        return {\n          id,\n          child, // children id array\n          label: item.label,\n          options: this.getDataFromSelect(item, id),\n          type: 'optgroup'\n        };\n      }\n      return null;\n    });\n  }\n\n  createCacheFromData(data) {\n    const { labelName, valueName } = this.settings;\n\n    this.data = data.map(item => {\n      const label = item[labelName];\n      const value = item[valueName];\n      const { selected } = item;\n\n      if (selected) {\n        this.value.push(value);\n      }\n\n      return Object.assign({}, item, {\n        label, value, selected: false\n      });\n    });\n\n    data.forEach(item => {\n      const { type, child, options } = item;\n      const label = item[labelName];\n      const value = item[valueName];\n      \n      if (type === 'optgroup' || child || options) {\n        const id = value || item.id;\n        let _child = item.child;\n\n        if (!_child && options) {\n          _child = options.map(itm => itm.value);\n          this.createCacheFromData(options);\n        }\n\n        this.cache[id] = _child;\n        return;\n      }\n      // if (selected) {\n      //   this.value.push(value);\n      // }\n      \n      this.cache[value] = Object.assign({}, item, {\n        label,\n        value,\n        selected: false\n      });\n    });\n  }\n\n  /**\n   * @method\n   * create new element to exchange select element\n   * @param {HTMLElement} item\n   * */\n  initSelect(item) {\n    const element = item;\n    const { select, value, label } = this.createSelectDom(item);\n\n    // hide original select element\n    element.style.display = 'none';\n\n    this.select = select;\n\n    select.option = this.createOptionWrap(element);\n    // select.option.innerHTML = this.createDropdown();\n    this.createDropdown();\n    select.options = select.option.querySelectorAll('.menu-item');\n\n    const width = Math.max(select.clientWidth, select.option.clientWidth);\n    \n    select.option.style.width = width === 0 ? '100%' : width + 'px';\n    select.originElement = element;\n\n    // set default value\n    // won't trigger 'change' event\n    if (this.multiple) {\n      this.changeMultiSelectValue(false, 'init');\n    } else {\n      this.changeSelectValue(select, value, label, false, 'init');\n    }\n    \n    // bind event\n    this.bindEvent();\n\n    return select;\n  }\n\n  /**\n   * @method\n   * create new select element\n   * @param {HTMLElement} element\n   * @returns {Object}\n   * */\n  createSelectDom(element) {\n    const { selectClass, emptyLabel } = this.settings;\n    const dataClass = element.getAttribute('data-class') || '';\n    let className = selectClass;\n    \n    if (dataClass) {\n      className += ' ' + dataClass;\n    }\n\n    if (this.multiple) {\n      className += ' multiple';\n    }\n\n    if (this.group) {\n      className += ' group';\n    }\n\n    if (this.clearable) {\n      className += ' clearable';\n    }\n\n    if (this.enterable) {\n      className += ' enterable';\n    }\n\n    const selectUI = u.createElement('div', { className });\n\n    const value = this.value[0];\n    \n    let label = value ? this.cache[value].label : emptyLabel;\n\n    const wrap = element.parentNode;\n\n    return {\n      select: wrap.appendChild(selectUI),\n      value,\n      label\n    };\n  }\n\n  // to base\n  createOptionWrap(element) {\n    let { optionClass } = this.settings;\n    if (this.group) {\n      optionClass += ' group';\n    }\n\n    if (this.multiple) {\n      optionClass += ' multiple';\n    }\n\n    if (this.checkable) {\n      optionClass += ' checkable';\n    }\n\n    if (this.max && this.value.length >= this.max) {\n      optionClass += ' no-add';\n    }\n\n    const optionUI = u.createElement('div', { className: optionClass });\n\n    const wrap = element.parentNode;\n\n    return wrap.appendChild(optionUI);\n  }\n\n  /**\n   * @method\n   * create new 'option'\n   * @param {HTMLElement} element\n   * @returns {String}\n   * */\n  createDropdown(match) {\n    let domString = '<div class=\"select-ul\">';\n    const { emptyLi } = this.settings;\n\n    if (this.search) {\n      domString += Select.createSearch() + '<ul class=\"select-main\">';\n    }\n\n    domString += '<ul class=\"select-main\">' + (this.createOptionContent(this.data, match) || `<li class=\"li-empty\">${emptyLi}</li>`);\n\n    this.select.option.innerHTML = domString + '</ul></div>';\n  }\n\n  /**\n   * create main options list\n   * @param element {HTMLElement} origin select\n   * @param match {string|any} search content\n   */ \n  createOptionContent(data, match, option) {\n    return data.reduce((str, item) => {\n      if (item.type && item.type === 'optgroup') {\n        return str + this.createOptionGroup(item, match);\n      }\n      return str + this.createOptionSingle(item, match, option);\n    }, '');\n  }\n\n  createOptionGroup(optgroup, match) {\n    let { options, label, id } = optgroup;\n    const str = this.createOptionContent(options, match);\n\n    if (!str) return '';\n    \n    const className = ' expend';\n\n    if (this.checkable) {\n      label = `<label class=\"ui-checkbox\"><input type=\"checkbox\" class=\"check-group\" value=\"${id}\"><i class=\"iconfont\"></i>${label}</label>`;\n    }\n    \n    return `<li class=\"option-group\">\n              <div class=\"group-label${className}\">\n                <i class=\"iconfont icon-caret-right\"></i>\n                ${label}</div>\n              <ul class=\"group-ul\">\n              ${str}\n              </ul>\n            </li>`;\n  }\n\n  createOptionSingle(item, match) {\n    const { optionTemplate } = this.settings;\n\n    if (match && item.label.indexOf(match) === -1) return '';\n\n    if (this.checkable) {\n      return Select.createOptionWithCheckbox(item);\n    }\n    \n    if (optionTemplate) {\n      const str = optionTemplate(item);\n      let tpl = str;\n      let className = '';\n      if (typeof str === 'object') {\n        tpl = str.tpl || '';\n        className = str.className || '';\n      }\n      return this.createOptionItem(item, { tpl, className });\n    }\n    \n    return this.createOptionItem(item);\n  }\n\n  static createSearch() {\n    const searchDom = `<div class=\"select-search\">\n      <input type=\"search\" class=\"ui-form-control\">\n    </div>`;\n    return searchDom;\n  }\n\n  static createOptionWithCheckbox({ selected, value, label, disabled }) {\n    const checked = selected ? 'checked' : '';\n    let className = disabled ? 'disabled' : '';\n    return `<li class=\"menu-item label-item ${className}\" title=\"${label}\" data-value=\"${value}\">\n      <label class=\"ui-checkbox\"><input type=\"checkbox\" ${checked} value=\"${value}\"/><i class=\"iconfont\"></i>${label}</label>\n    </li>`;\n  }\n\n  changeCheck(checkbox) {\n    if (u.hasClass(checkbox, 'check-group')) {\n      this.changeCheckParent(checkbox);\n    } else {\n      const checked = checkbox.checked;\n      this.changeCacheValue(checkbox.value, checked);\n      this.changeCheckAll(checkbox.value);\n    }\n\n    this.changeMultiSelectValue(true);\n  }\n\n  changeCheckParent(checkbox) {\n    const parent = checkbox.value;\n    const { checked } = checkbox;\n    const child = this.cache[parent];\n\n    child.forEach(id => {\n      this.select.option.querySelector('[value=\"' + id + '\"]').checked = checked;\n    });\n\n    this.changeCacheValue(child, checked);\n  }\n\n  changeCheckAll(value) {\n    const { parent } = this.cache[value];\n    if (!parent) return;\n\n    const child = this.cache[parent];\n    const checkbox = this.select.option.querySelector('[value=\"' + parent + '\"]');\n    let check = true;\n    let indeterminate = false;\n\n    child.forEach(itm => {\n      const { selected } = this.cache[itm];\n      if (selected) {\n        indeterminate = true;\n      } else {\n        check = false;\n      }\n    });\n\n    checkbox.checked = check;\n    checkbox.indeterminate = !check && indeterminate;\n  }\n\n  toggleItemSelected(value) {\n    const add = this.value.indexOf(value) === -1;\n    this.changeCacheValue(value, add);\n  }\n\n  changeCacheValue(value, add) {\n    if (!this.multiple) {\n      this.value = [value];\n    } else if (Array.isArray(value)) {\n      value.forEach(item => {\n        this.dealMultiValue(item, add);\n      });\n    } else {\n      this.dealMultiValue(value, add);\n    }\n  }\n\n  resetValue(value) {\n    const self = this;\n\n    if (Array.isArray(value)) {\n      this.value = value;\n\n      if (this.multiple) {\n        this.changeMultiSelectValue(false, 'change');\n      } else {\n        const select = self.select;\n        const label = self.cache[value].label;\n        self.changeSelectValue(select, value, label);\n        self.changeMultiSelectedClass();\n      }\n    }\n  }\n\n  dealMultiValue(value, add) {\n    const { select, max } = this;\n    const index = this.value.indexOf(value);\n    \n    if (add) {\n      if (index === -1) {\n        this.value.push(value);\n      }\n    } else if (index > -1) {\n      this.value.splice(index, 1);\n    }\n\n    if (max) {\n      if (this.value.length >= max) {\n        u.addClass(select.option, 'no-add');\n      } else {\n        u.removeClass(select.option, 'no-add');\n      }\n    }\n  }\n\n  changeMultiSelectedClass() {\n    const { select, value } = this;\n    const { selectedClass } = this.settings;\n\n    u.forEach(select.option.querySelectorAll('.menu-item'), item => {\n      const _value = item.getAttribute('data-value');\n      if (value.indexOf(_value) > -1) {\n        u.addClass(item, selectedClass);\n      } else {\n        u.removeClass(item, selectedClass);\n      }\n    });\n  }\n\n  changeOriginElementValue(eventType) {\n    const { select, nodeType, value } = this;\n    const originElement = select.originElement;\n\n    if (nodeType === 'input') {\n      originElement.value = this.value;\n    }\n\n    if (nodeType === 'select') {\n      const options = originElement.options;\n\n      if (Array.isArray(value)) {\n        u.forEach(options, item => {\n          item.selected = value.indexOf(item.value) > -1;\n        });\n      }\n    }\n\n    originElement.trigger(eventType);\n  }\n\n  /**\n   * @param {Boolean} show\n   * @param {String} type\n   * */\n  changeMultiSelectValue(show = false, type = 'change') {\n    const { select } = this;\n    this.changeOriginElementValue(type);\n\n    if (!show) {\n      this.hideOption(select);\n    }\n    \n    this.changeMultiSelectLabel(type);\n    this.changeMultiSelectedClass();\n  }\n\n  changeMultiSelectLabel(type) {\n    const { select } = this;\n    select.innerHTML = this.createMultiTag() || this.settings.emptyLabel;\n\n    if (this.enterable && type === 'change') {\n      select.querySelector('.select-input').focus();\n      this.createDropdown();\n    }\n  }\n\n  createEnterInput() {\n    const { value, enterable } = this;\n    const { placeholder } = this.settings;\n\n    if (!enterable) {\n      return '';\n    }\n\n    if (!value.length) {\n      return `<input class=\"select-input\" placeholder=\"${placeholder}\" autocomplete=\"off\">`;\n    }\n\n    return '<input class=\"select-input\" autocomplete=\"off\" >';\n  }\n\n  createMultiTag() {\n    const values = this.value;\n    const { tagClass } = this.settings;\n    let input = this.createEnterInput();\n\n    if (!values.length) {\n      return input || this.settings.emptyLabel;\n    }\n\n    const str = values.reduce((result, item) => {\n      const data = this.cache[item];\n      let tagClassName = 'gray';\n      let label;\n      let value;\n\n      if (this.enterable && !data) {\n        label = item;\n        value = item;\n      } \n      \n      if (data) {\n        label = data.label;\n        value = data.value;\n      }\n      \n      if (tagClass) {\n        if (typeof tagClass === 'string') {\n          tagClassName = tagClass;\n        }\n        if (typeof tagClass === 'function') {\n          tagClassName = tagClass(data);\n        }\n      }\n\n      return result + `<span class=\"ui-tag ${tagClassName} closeable\" data-tooltip data-position=\"center top\" data-title=\"${label}\">${label} <i data-value=\"${value}\" class=\"iconfont icon-times js-del-selected\"></i></span>`;\n    }, '');\n\n    return str + input;\n  }\n\n  checkLabels(val) {\n    const { cache } = this;\n    \n    let _v;\n\n    Object.keys(cache).forEach(key => {\n      const { value, label } = cache[key];\n      if (label === val) {\n        _v = value;\n      }\n    });\n\n    if (typeof _v === 'undefined') {\n      const id = 'cus-' + u.createId();\n      this.cache[id] = {\n        label: val,\n        value: id\n      };\n\n      this.changeCacheValue(id, true);\n    } else {\n      let bool = !(this.value.indexOf(_v) > -1);\n      this.changeCacheValue(_v, bool);\n    }\n    \n    this.changeMultiSelectLabel('change');\n  }\n\n  dealSelectEnter(e, input) {\n    const self = this;\n\n    clearTimeout(self.inputTimer);\n\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      \n      const value = input.value;\n\n      if (value.trim().length) {\n        self.checkLabels(value);\n      }\n    }\n  }\n\n  /**\n   * @method\n   * @param {Object} select\n   * */\n  bindEvent() {\n    const select = this.select;\n    const option = select.option;\n    const self = this;\n    const selectFn = this.settings.selectFn;\n\n    this.selectClickEvent(select, function () {\n      if (self.enterable) {\n        // select.option.innerHTML = self.createDropdown();\n        self.createDropdown();\n      }\n    });\n\n    u.on(select, 'keydown', '.select-input', function (e) {\n      e.stopPropagation();\n      \n      self.dealSelectEnter(e, this);\n    });\n\n    u.on(select, 'click', '.select-input', function (e) {\n      e.stopPropagation();\n      self.showOption(select);\n    });\n\n    u.on(option, 'click', '.menu-item', function (e) {\n      e.stopPropagation();\n      \n      // group label\n      if (u.hasClass(this, 'label-item')) return;\n\n      // disabled item\n      if (u.hasClass(this, 'disabled')) return;\n\n      // max limit\n      if (self.max && self.value.length >= self.max && !u.hasClass(this, 'selected')) {\n        return;\n      }\n\n      // single select [selected]\n      if (!self.multiple && u.hasClass(this, 'selected')) {\n        self.hideOption(select);\n        return;\n      }\n\n      const value = this.getAttribute('data-value');\n      const { label } = self.cache[value];\n\n      if (selectFn && typeof selectFn === 'function') {\n        selectFn(value, select);\n      }\n\n      self.toggleItemSelected(value);\n\n      if (self.multiple) {\n        self.changeMultiSelectValue(true);\n      } else {\n        self.changeSelectValue(select, value, label);\n        self.changeMultiSelectedClass();\n      }\n    });\n\n    u.on(option, 'click', '.group-label', function (e) {\n      e.stopPropagation();\n\n      u.toggleClass(this, 'expend');\n    });\n\n    u.on(option, 'change', 'input', function () {\n      self.changeCheck(this);\n    });\n\n    u.on(option, 'click', '.select-search', function (e) {\n      e.stopPropagation();\n    });\n\n    this.inputTimer = null;\n\n    u.on(select, 'input', '.select-input', function () {\n      clearTimeout(self.inputTimer);\n\n      self.inputTimer = setTimeout(() => {\n        const val = this.value;\n        const main = self.createOptionContent(self.data, val);\n        let con = main || '<li class=\"li-empty\">暂无搜索结果</li>';\n\n        option.querySelector('.select-main').innerHTML = con;\n      }, 200);\n    });\n  }\n}\n\nexport default function (selector, options) {\n  if (typeof selector === 'string') {\n    const elements = document.querySelectorAll(selector);\n\n    return [].slice.call(elements).map(item => {\n      return new Select(item, options);\n    });\n  } \n\n  if (typeof selector === 'object' && selector !== null) {\n    return new Select(selector, options);\n  }\n\n  return null;\n}\n","import Util from '../base/util.es6';\nimport SelectBase from './SelectBase.es6';\n\nconst doc = document;\n\nclass Cascader extends SelectBase {\n  constructor(elementSelector, options) {\n    const defaultSettings = Object.assign({}, {\n      selectElement: 'div',\n      selectedClass: 'selected',\n\n      showClass: 'show',\n\n      selectShowClass: 'ui-select-active',\n      selectClass: 'ui-select ui-form-control',\n\n      optionGroupClass: 'ui-select-dropdown menu-group hide',\n\n      ajaxUrl: [],\n\n      valueName: 'value',\n      labelName: 'label',\n\n      dataName: 'id',\n      data: {},\n\n      selectFn: null,\n      selectFinalFn: null\n    }, options);\n\n    super(defaultSettings);\n\n    let element = elementSelector;\n    \n    if (typeof elementSelector === 'string') {\n      element = doc.querySelector(elementSelector);\n    }\n\n    if (!element) return;\n\n    this.select = element;\n\n    this.init();\n  }\n\n  init() {\n    this.complete = false;\n    this.linkage = [];\n    this.values = [];\n\n    this.defaultValue = null;\n    this.max = 0;\n\n    this.initAjaxSelect();\n  }\n\n  /**\n   * @method\n   * */\n  initAjaxSelect() {\n    const select = this.select;\n    const { ajaxUrl } = this.settings;\n\n    const valueArray = select.getAttribute('data-default');\n\n    if (valueArray) {\n      this.defaultValue = valueArray.split(',');\n    }\n    \n    if (!ajaxUrl.length && !select.getAttribute('data-ajax')) {\n      return;\n    }\n\n    // urls to get option items data\n    this.urlArray = ajaxUrl.length\n      ? ajaxUrl\n      : select.getAttribute('data-ajax').split(',');\n    \n    this.max = this.urlArray.length;\n\n    // whether should select to the final level or not\n    this.level = Number(select.getAttribute('data-level')) || 0;\n\n    this.initInput();\n    this.initDropdownWrap();\n\n    this.createAjaxOption(1);\n\n    this.selectClickEvent(select, () => {\n      if (!this.complete && this.defaultValue) {\n        this.initStatus(select);\n        this.createAjaxOption(1);\n      }\n    });\n\n    this.optionClickEvent();\n  }\n\n  resetValue(value) {\n    this.defaultValue = value;\n    this.createAjaxOption(1);\n  }\n\n  initStatus(select) {\n    const option = select.option;\n    this.linkage = [];\n    option.innerHTML = '';\n  }\n\n  /**\n   * input element to save value\n   * */\n  initInput() {\n    const select = this.select;\n    const parent = select.parentNode;\n    const dataInput = select.getAttribute('data-input');\n\n    select.originElement = dataInput\n      ? doc.querySelector(dataInput)\n      : parent.appendChild(Util.createElement('input', {\n        type: 'hidden',\n        name: select.id\n      }));\n  }\n\n  /**\n   * create div.ui-select-dropdown element\n   * */\n  initDropdownWrap() {\n    const select = this.select;\n    const className = this.settings.optionGroupClass;\n    const option = select.parentNode.appendChild(Util.createElement('div', { className }));\n    const _width = Math.max(select.clientWidth, option.clientWidth);\n\n    option.style.width = _width ? _width + 'px' : 'auto';\n\n    select.option = option;\n  }\n\n  /**\n   * @method\n   * @param {Node|Object} select\n   * @param {Number} level\n   * @param {Object} [d = {}]\n   * @param {*} type\n   * */\n  createAjaxOption(level, d = {}, type = false) {\n    const select = this.select;\n    const url = this.urlArray[level - 1];\n    const data = this.settings.data;\n\n    if (url) {\n      Util.fetchData(url, Object.assign({}, data, d))\n        .then(res => {\n          if (res.code === 200) {\n            if (Util.isEmpty(res.data)) {\n              this.selectFinalLevelEvent();\n              this.removeNextSiblingOptions(level - 1);\n            } else {\n              this.appendAjaxOption(res.data, select, level, type);\n            }\n          }\n        });\n    } else {\n      this.selectFinalLevelEvent();\n    }\n  }\n\n  selectFinalLevelEvent() {\n    const { selectFinalFn } = this.settings;\n    if (typeof selectFinalFn === 'function') {\n      selectFinalFn(this.values);\n    }\n  }\n\n  /**\n   * @method\n   * @param {Array} data - options data array\n   * @param {Object} select\n   * @param {Number} level - linkage level\n   * (index = level - 1, index from 0, level from 1)\n   * @param {*} type\n   * */\n  appendAjaxOption(data, select, level, type) {\n    let domString = '';\n    const trigger = !!(this.defaultValue);\n    const { valueName, labelName } = this.settings;\n\n    // array data to create options\n    data.forEach(item => {\n      let selected = false;\n      if (trigger && !type) {\n        selected = item[valueName] == this.defaultValue[level - 1]; // eslint-disable-line\n      }\n \n      domString += this.createOptionItem({\n        selected, \n        value: item[valueName], \n        label: item[labelName]\n      }, { level });\n    });\n\n    const optionUI = select.option.appendChild(Util.createElement('ul', { className: 'select-main' }, domString));\n\n    // trigger nex level\n    if (!type) {\n      const selected = optionUI.querySelector('.selected');\n      if (selected) {\n        this.triggerNewItem(selected, select);\n        if (selected.offsetTop > optionUI.clientHeight) {\n          optionUI.scrollTop = selected.offsetTop - (optionUI.clientHeight / 2);\n        }\n      }\n    }\n\n    this.removeNextSiblingOptions(level - 1);\n\n    this.linkage.push(optionUI);\n  }\n\n  removeNextSiblingOptions(index) {\n    const { linkage, urlArray } = this;\n    const max = urlArray.length;\n    linkage.splice(index, max).forEach(item => {\n      item.parentNode.removeChild(item);\n    });\n  }\n\n  /**\n   * @method\n   * @param {Object} select\n   * */\n  optionClickEvent() {\n    const self = this;\n    const select = this.select;\n\n    Util.on(select.option, 'click', '.menu-item', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const ul = this.parentNode;\n      self.changeSelectedClass(ul, this);\n\n      self.triggerNewItem(this, select, 'click');\n    });\n\n    select.option.addEventListener('click', e => {\n      e.stopPropagation();\n    });\n  }\n\n  triggerNewItem(element, select, type) {\n    const value = element.getAttribute('data-value');\n    const level = Number(element.getAttribute('data-level'));\n    const label = element.innerHTML.trim();\n    const show = !type;\n    const values = this.values;\n    const { selectFn, dataName } = this.settings;\n\n    values[level - 1] = { value, label };\n    values.splice(level, values.length);\n\n    if (typeof selectFn === 'function') {\n      selectFn(element, select, type);\n    }\n\n    if (this.level) {\n      if (level < this.level) {\n        this.complete = false;\n        this.createAjaxOption(level + 1, {\n          [dataName]: value\n        }, type);\n      }\n\n      if (level === this.level) {\n        this.complete = true;\n        this.setValue(show);\n        this.defaultValue = this.values.map(item => item.value);\n        this.selectFinalLevelEvent();\n      }\n    } else {\n      this.complete = true;\n      this.setValue();\n      this.createAjaxOption(level + 1, {\n        [dataName]: value\n      }, type);\n    }\n  }\n\n  /**\n   * @static\n   * set select text and value\n   * @param {Object} select\n   * @param {Boolean} show\n   * */\n  setValue(show) {\n    const select = this.select;\n    let valueAll = [];\n    let labelAll = [];\n\n    this.values.forEach((item) => {\n      valueAll.push(item.value);\n      labelAll.push(item.label);\n    });\n    this.changeSelectValue(select, valueAll.join(','), labelAll.join(' / '), show);\n  }\n\n  /**\n   * @method\n   * remove created option and input dom\n   * */\n  destroy() {\n    const select = this.select;\n    const { option } = select;\n    const dataInput = select.getAttribute('data-input');\n\n    if (!dataInput) {\n      select.originElement.parentNode.removeChild(select.originElement);\n    }\n    option.parentNode.removeChild(option);\n  }\n}\n\nexport default Cascader;\n","import Util from '../base/util.es6';\n\nconst doc = document;\nconst body = doc.body;\n\nclass Modal {\n  constructor(settings) {\n    const defaultSettings = {\n      modal: null,\n      modalBox: '.modal-box',\n      modalContent: '.modal-content',\n      modalTitle: '.modal-title',\n\n      title: null,\n\n      type: null, // confirm\n\n      open: '[data-modal-open]',\n      close: '[data-modal-close]',\n\n      showClass: 'modal-visible',\n      animateClass: 'fadeInDown',\n\n      resize: false,\n\n      clickOutside: true,\n      closeKey: 27,\n\n      onOpen: null,\n      onClose: null,\n      onResize: null,\n\n      onCancel: null,\n      onConfirm: null,\n\n      footer: true,\n      cancelBtn: '取消',\n      confirmBtn: '确定',   \n\n      // button\n      btnOkClass: 'ui-button primary',\n      btnCancelClass: 'ui-button',\n      btnType: '' // '' 'center'\n    };\n\n    if (settings && settings.type === 'confirm') {\n      defaultSettings.btnOkClass = 'ui-button small primary';\n      defaultSettings.btnCancelClass = 'ui-button small';\n    }\n\n    this.settings = Object.assign({}, defaultSettings, settings);\n\n    this.isShow = false;\n    this.current = null;\n\n    this.init();\n  }\n\n  /**\n   * @method\n   * create modal element\n   *\n   * @returns {Node}\n   * */\n  createModalHtml(type) {\n    const closeIcon = '<span class=\"modal-close iconfont icon-times\" data-modal-close></span>';\n    let str = '';\n    let className = 'ui-modal';\n\n    switch (type) {\n      case 'confirm':\n        str = this.getConfirmTypeHtml();\n        className = 'ui-modal-confirm';\n        break;\n      default:\n        str = this.getModalTypeHtml(closeIcon);\n        break;\n    }\n\n    const div = Util.createElement('div', { className }, str);\n\n    return body.appendChild(div);\n  }\n\n  createModalFooter() {\n    const { cancelBtn, footer, confirmBtn, btnOkClass, btnCancelClass, onCancel } = this.settings;\n\n    let confirmButton = '';\n    let cancelButton = '';\n    let foot = '';\n\n    if (!footer) {\n      return foot;\n    }\n\n    if (confirmBtn) {\n      confirmButton = `<button class=\"${btnOkClass} modal-ok\">${confirmBtn}</button>`;\n    }\n\n    if (cancelBtn) {\n      if (onCancel) {\n        cancelButton = `<button class=\"${btnCancelClass} modal-cancel\">${cancelBtn}</button>`;\n      } else {\n        cancelButton = `<button class=\"${btnCancelClass} modal-cancel\" data-modal-close>${cancelBtn}</button>`;\n      }\n    }\n\n    if (confirmBtn || cancelBtn) {\n      foot = `<div class=\"modal-footer\">${confirmButton}${cancelButton}</div>`;\n    }\n\n    return foot;\n  }\n\n  getModalTypeHtml(closeIcon) {\n    const { resize } = this.settings;\n    const resizeClass = resize ? ' resizable' : '';\n    const resizeTrigger = resize ? '<span class=\"resize-trigger\"></span>' : '';\n    const foot = this.createModalFooter();\n\n    return `<div class=\"modal-box${resizeClass}\">${closeIcon}`\n            + '<div class=\"modal-title\"></div><div class=\"modal-content\"></div>'\n            + `${foot}${resizeTrigger}</div>`;\n  }\n\n  getConfirmTypeHtml() {\n    const foot = this.createModalFooter();\n\n    return '<div class=\"ui-confirm modal-box\">'\n      + '<div class=\"modal-content\"></div>'\n      + foot\n      + '</div>';\n  }\n\n  /**\n   * @method\n   * @param {Object} option\n   * @returns {String} confirm html\n   * */\n  static createConfirmHtml(option) {\n    const { content, desc } = option;\n    const titHtml = content ? `<div class=\"warn\">${content}</div>` : '';\n    const descHtml = desc ? `<div class=\"desc\">${desc}</div>` : '';\n\n    return `${titHtml}${descHtml}`;\n  }\n\n  init() {\n    let modal = this.settings.modal;\n    const {\n      modalBox,\n      modalContent,\n      modalTitle,\n      type\n    } = this.settings;\n\n    if (!modal) {\n      modal = this.createModalHtml(type);\n    }\n\n    this.modal = modal;\n    this.modalBox = modal.querySelector(modalBox);\n    this.modalTitle = modal.querySelector(modalTitle);\n    this.modalContent = modal.querySelector(modalContent);\n\n    this.modalOk = modal.querySelector('.modal-ok');\n    this.modalCancel = modal.querySelector('.modal-cancel');\n\n    this.events();\n  }\n\n  /**\n   * @method\n   * set modal content\n   *\n   * @param {String} content\n   * */\n  setContent(content) {\n    this.modalContent.innerHTML = content;\n  }\n\n  /**\n   * @method\n   * set modal title\n   *\n   * @param {String} title\n   * */\n  setTitle(title) {\n    if (!title) return;\n    this.modalTitle.innerHTML = `<div class=\"modal-head\">${title}</div>`;\n  }\n\n  /**\n   * @method\n   * display modal\n   *\n   * @param {Object} options\n   * */\n  show(options) {\n    const { content, title } = options;\n\n    this.setContent(content);\n    this.setTitle(title);\n\n    this.toggleShowHide('show');\n    Util.addClass(document.querySelector('html'), 'modal-open');\n  }\n\n  confirm(option, getData = null) {\n    const content = Modal.createConfirmHtml(option);\n    this.getData = getData;\n    this.setContent(content);\n\n    this.toggleShowHide('show');\n  }\n\n  /**\n   * @method\n   * hide modal\n   * */\n  hide() {\n    this.toggleShowHide('hide');\n    this.modalContent.innerHTML = '';\n    if (this.modalTitle) {\n      this.modalTitle.innerHTML = '';\n    }\n\n    Util.removeClass(document.querySelector('html'), 'modal-open');\n  }\n\n  /**\n   * @param {'show'|'hide'} type\n   * */\n  toggleShowHide(type) {\n    const modal = this.modal;\n    const modalBox = this.modalBox;\n    const { showClass, animateClass, onOpen, onClose } = this.settings;\n\n    if (type === 'show') {\n      Util.addClass(modal, showClass);\n      Util.addClass(modalBox, animateClass);\n\n      this.isShow = true;\n      if (typeof onOpen === 'function') {\n        onOpen(this);\n      }\n    }\n\n    if (type === 'hide') {\n      this.isShow = false;\n      if (typeof onClose === 'function') {\n        onClose(this);\n      }\n\n      Util.removeClass(modal, showClass);\n      Util.removeClass(modalBox, animateClass);\n    }\n  }\n\n  events() {\n    const self = this;\n    const { clickOutside, closeKey, resize, onCancel, onConfirm } = this.settings;\n    const { modalOk, modalCancel } = this;\n\n    Util.on(this.modal, 'click', '[data-modal-close]', () => {\n      this.hide();\n    });\n\n    if (modalOk && onConfirm) {\n      modalOk.addEventListener('click', function (e) {\n        onConfirm(e, self, self.getData);\n      });\n    }\n\n    if (modalCancel && onCancel) {\n      modalCancel.addEventListener('click', function (e) {\n        onCancel(e, self, self.getData);\n      });\n    }\n\n    if (clickOutside) {\n      body.addEventListener('keydown', (e) => {\n        if (e.keyCode === closeKey) {\n          this.hide();\n        }\n      });\n    }\n\n    if (resize) {\n      this.resizeEvent();\n    }\n  }\n\n  // resize modal\n  resizeEvent() {\n    const modalBox = this.modalBox;\n    const docEle = document.documentElement;\n    const { onResize } = this.settings;\n    const { height: minHeight, width: minWidth } = modalBox.getBoundingClientRect();\n\n    let startX;\n    let startY;\n    let startWidth;\n    let startHeight;\n    let maxWidth;\n    let maxHeight;\n\n    const resizeTrigger = modalBox.querySelector('.resize-trigger');\n\n    function doDrag(e) {\n      let width = startWidth + ((e.clientX - startX) * 2);\n      let height = startHeight + ((e.clientY - startY) * 2);\n\n      if (width > maxWidth) {\n        width = maxWidth;\n      }\n\n      if (height > maxHeight) {\n        height = maxHeight;\n      }\n\n      modalBox.style.width = width + 'px';\n      modalBox.style.height = height + 'px';\n\n      if (typeof onResize === 'function') {\n        onResize(width, height);\n      }\n    }\n\n    function stopDrag() {\n      docEle.removeEventListener('mousemove', doDrag, false);\n      docEle.removeEventListener('mouseup', stopDrag, false);\n    }\n\n    resizeTrigger.addEventListener('mousedown', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      startX = e.clientX;\n      startY = e.clientY;\n\n      maxWidth = docEle.clientWidth * 0.95;\n      maxHeight = docEle.clientHeight * 0.98;\n\n      startWidth = modalBox.getBoundingClientRect().width;\n      startHeight = modalBox.getBoundingClientRect().height;\n\n      docEle.addEventListener('mousemove', doDrag, false);\n      docEle.addEventListener('mouseup', stopDrag, false);\n    }, false);\n  }\n}\n\nexport default Modal;\n","import Util from '../base/util.es6';\n\nclass Message {\n  constructor(settings) {\n    const defaultSettings = {\n      duration: 3000,\n      position: 'top',\n      top: 27 // px\n    };\n\n    this.settings = Object.assign({}, defaultSettings, settings);\n\n    this.init();\n  }\n\n  init() {\n    // do .. what ...\n    this.count = 0;\n    // this.messages = [];\n  }\n\n  success(message, position) {\n    this.show(message, true, position);\n  }\n\n  warn(message, position) {\n    this.show(message, false, position);\n  }\n\n  show(message, type, position) {\n    const content = Message.createAlert(message, type);\n\n    const alert = document.querySelector('.ui-alert');\n    if (alert) {\n      alert.parentNode.removeChild(alert);\n    }\n\n    const msg = document.body.appendChild(content);\n\n    if (this.settings.position === 'center' || position === 'center') {\n      msg.style.top = '50%';\n\n      // setTimeout(() => {\n      //   msg.parentNode.removeChild(msg);\n      // }, this.settings.duration);\n\n      // return;\n    } else {\n      msg.style.top = this.settings.top + 'px';\n    }\n\n    // const top = this.settings.top + (this.count * 50) + 'px';\n    \n    // msg.style.top = top;\n      \n    // this.count += 1;\n      \n    // this.messages.push(msg);\n    \n    setTimeout(() => {\n      // this.hide(msg);\n      if (msg && msg.parentNode) {\n        msg.parentNode.removeChild(msg);\n      }\n    }, this.settings.duration);\n  }\n\n  // hide() {\n  //   this.count -= 1;\n  //   const ele = this.messages.shift();\n  //   ele.parentNode.removeChild(ele);\n  //   this.resetTop();\n  // }\n\n  // resetTop() {\n  //   const { messages } = this;\n  //   messages.forEach((item) => {\n  //     const top = item.style.top;\n  //     item.style.top = (parseInt(top, 10) - 50) + 'px';\n  //   });\n  // }\n\n  static createAlert(content, type) {\n    let _type = 'success';\n    if (typeof type === 'boolean' && !type) {\n      _type = 'warn';\n    }\n    const className = 'alert-' + _type;\n\n    const domString = Message.createDomString(content, className);\n    const div = Util.createElement('div', { className: 'ui-alert' }, domString);\n\n    return div;\n  }\n\n  static createDomString(content, className) {\n    return `<div class=\"alert-content ${className}\">${content}</div>`;\n  }\n}\n\nexport default Message;\n","class Position {\n  constructor(options) {\n    const defaultSettings = {\n      position: 'right bottom',\n      gap: 4\n    };\n\n    this.settings = Object.assign({}, defaultSettings, options);\n  }\n\n  setPosition(element, targetElement) {\n    const { gap } = this.settings;\n    const { left, top } = targetElement.getBoundingClientRect();\n    const data = targetElement.getAttribute('data-position');\n    const position = data || this.settings.position;\n\n    const pos = {\n      targetHeight: targetElement.offsetHeight,\n      targetWidth: targetElement.offsetWidth,\n      targetLeft: left + window.scrollX,\n      targetTop: top + window.scrollY,\n      elementHeight: element.offsetHeight,\n      elementWidth: element.offsetWidth\n    };\n\n    const style = element.style;\n\n    element.style.width = element.offsetWidth + 'px';\n\n    const [x, y] = position.split(' ');\n\n    if (y === 'middle') {\n      Position.setPositionMiddle(x, pos, style, gap);\n    } else {\n      Position.setPositionVertical(y, pos, style, gap);\n      Position.setPositionHorizontal(x, pos, style, gap);\n    }\n  }\n\n  static setPositionVertical(y, pos, style, gap) {\n    const sty = style;\n    const h = (pos.targetTop + pos.targetHeight + gap) + 'px';\n    let t = (pos.targetTop - pos.elementHeight - gap) + 'px';\n\n    if (pos.targetTop < pos.elementHeight) {\n      t = h;\n    }\n\n    if (y === 'bottom') {\n      sty.top = h;\n    }\n    if (y === 'top') {\n      sty.top = t;\n    }\n  }\n\n  static setPositionHorizontal(x, pos, style) {\n    const sty = style;\n\n    switch (x) {\n      case 'right':\n        sty.left = pos.targetLeft + 'px';\n        break;\n      case 'left':\n        sty.left = ((pos.targetLeft + pos.targetWidth) - pos.elementWidth) + 'px';\n        break;\n      case 'center':\n        sty.left = ((pos.targetLeft + (pos.targetWidth / 2)) - (pos.elementWidth / 2)) + 'px';\n        break;\n      default:\n        break;\n    }\n  }\n\n  static setPositionMiddle(x, pos, style, gap) {\n    const sty = style;\n\n    sty.top = ((pos.targetTop + (pos.targetHeight / 2)) - (pos.elementHeight / 2)) + 'px';\n\n    if (x === 'left') {\n      sty.left = (pos.targetLeft - gap) - pos.elementWidth + 'px';\n    }\n\n    if (x === 'right') {\n      sty.left = pos.targetLeft + pos.targetWidth + gap + 'px';\n    }\n  }\n}\n\nexport default Position;\n","import u from '../base/util.es6';\nimport Position from './Position.es6';\n\nconst doc = document;\n\nclass Tooltip extends Position {\n  constructor(selector, options) {\n    const defaultSetting = {\n      className: 'ui-tooltip',\n      position: 'left bottom',\n      // x: left center right  y: top bottom\n      width: '',\n      maxWidth: '',\n\n      gap: 4,\n      \n      showEvent: 'mouseover',\n      hideEvent: 'mouseout',\n      template: null\n    };\n\n    const settings = Object.assign({}, defaultSetting, options);\n\n    super(settings);\n\n    this.init(selector);\n  }\n\n  init(selector) {\n    const self = this;\n    const { showEvent, hideEvent } = this.settings;\n\n\n    u.on(doc, showEvent, selector, function (e) {\n      if (e.target.matches(selector)) {\n        this.timer = setTimeout(() => {\n          self.showTooltip(this);\n        }, 200);\n      }\n    });\n\n    u.on(doc, hideEvent, selector, function (e) {\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      Tooltip.destroyTooltip(this.tooltip, this);\n    });\n  }\n\n  showTooltip(element) {\n    const self = this;\n    const ele = element;\n    const { width, maxWidth } = this.settings;\n    if (ele.noTooltip) return;\n\n    const title = ele.getAttribute('data-title');\n    \n    if (title) {\n      if (ele.scrollWidth <= ele.offsetWidth) {\n        ele.noTooltip = true;\n        return;\n      }\n    }\n    \n    const data = ele.getAttribute('data-position');\n    const position = data || this.settings.position;\n    const tooltip = this.createTooltipElement(ele, position);\n    const style = tooltip.style;\n\n    style.display = 'block';\n\n    if (width) {\n      style.width = width + 'px';\n      style.maxWidth = 'none';\n    }\n\n    if (maxWidth) {\n      style.maxWidth = maxWidth + 'px';\n    }\n\n    style.left = 0;\n    style.bottom = 0;\n\n    ele.tooltip = tooltip;\n\n    setTimeout(() => {\n      style.left = 'auto';\n      style.bottom = 'auto';\n\n      self.setPosition(tooltip, element);\n    }, 2);\n  }\n\n  static destroyTooltip(tooltipElement, ele) {\n    const tip = tooltipElement;\n\n    if (tip) {\n      tip.parentNode.removeChild(tip);\n      ele.tooltip = null;\n    }\n  }\n\n  createTooltipElement(element, position) {\n    const { template } = this.settings;\n    let text = element.getAttribute('data-text');\n    const title = element.getAttribute('data-title');\n    const dataTip = element.querySelector('.data-tip') ? element.querySelector('.data-tip').innerHTML : '';\n\n    text = (dataTip || text || title);\n    \n    const { className } = this.settings;\n\n    if (typeof template === 'function') {\n      text = template(text);\n    }\n\n    const dom = u.createElement('div', { className: `${className} ${position}` }, text);\n    return document.body.appendChild(dom);\n  }\n}\n\nexport default Tooltip;\n","import Util from '../base/util.es6';\nimport Position from './Position.es6';\n\nlet poppers = [];\n\nclass Popper extends Position {\n  constructor(element, options) {\n    const defaultSettings = {\n      className: 'ui-popper',\n      position: 'center bottom',\n      content: '',\n      gap: 4,\n      zIndex: null\n    };\n\n    const settings = Object.assign({}, defaultSettings, options);\n\n    super(settings);\n\n    this.init(element);\n  }\n\n  init(element) {\n    if (!element) return;\n\n    const { zIndex } = this.settings;\n\n    let data = element.getAttribute('data-position');\n    \n    if (data) {\n      this.settings.position = data;\n    }\n\n    Popper.hideOthers();\n    \n    const dom = this.createPopper();\n\n    this.setPosition(dom, element);\n\n    if (zIndex) {\n      dom.style.zIndex = zIndex;\n    }\n    \n    this.popper = dom;\n    poppers.push(this);\n  }\n\n  static hideOthers() {\n    poppers.forEach(item => {\n      item.destroy();\n    });\n\n    poppers = [];\n  }\n\n  createPopper() {\n    const { className, content } = this.settings;\n    const dom = Util.createElement('div', { className: `${className}` }, content);\n    return document.body.appendChild(dom);\n  }\n\n  destroy() {\n    if (!this.popper) return;\n    this.popper.parentNode.removeChild(this.popper);\n    this.popper = null;\n  }\n}\n\ndocument.addEventListener('click', (e) => {\n  if (e.target.closest('.ui-popper')) return;\n\n  poppers.forEach(item => {\n    item.destroy();\n  });\n\n  poppers = [];\n}, false);\n\nwindow.addEventListener('resize', function () {\n  if (poppers.length) {\n    poppers.forEach(item => {\n      item.destroy();\n    });\n  \n    poppers = [];\n  }\n}, false);\n\nexport default Popper;\n","import Util from '../base/util.es6';\n\nclass Layer {\n  constructor(settings) {\n    const defaults = {\n      layer: null,\n      title: null,\n      type: null, // alert, confirm\n\n      confirmType: 'warn', // warn success\n\n      close: '[data-layer-close]',\n\n      showClass: 'layer-visible',\n      width: 640,\n\n      onOpen: null,\n      onClose: null\n    };\n\n    this.settings = Object.assign({}, defaults, settings);\n\n    this.init();\n    this.events();\n  }\n\n  init() {\n    let layer = this.settings.layer;\n\n    if (!layer) {\n      layer = this.createLayer();\n    }\n\n    this.layer = layer;\n    this.layerHead = layer.querySelector('.layer-head');\n    this.layerContent = layer.querySelector('.layer-content');\n  }\n\n  createLayer() {\n    const { width } = this.settings;\n    const closeIcon = '<span class=\"layer-close iconfont icon-times\" data-layer-close></span>';\n    let htmlString = `<div class=\"layer-box\" style=\"width: ${width}px\">${closeIcon} \n      <div class=\"layer-head\"></div>\n      <div class=\"layer-content\"></div>\n    </div>`;\n    const div = Util.createElement('div', { className: 'ui-layer' }, htmlString);\n\n    return document.body.appendChild(div);\n  }\n\n  setContent(str) {\n    this.layerContent.innerHTML = str;\n  }\n\n  setTitle(str) {\n    this.layerHead.innerHTML = `<div class=\"layer-title\">${str}</div>`;\n  }\n\n  show(option) {\n    const layer = this.layer;\n    const { showClass, onOpen } = this.settings;\n    const { content, title } = option;\n    this.setContent(content);\n    this.setTitle(title);\n    Util.addClass(document.querySelector('html'), 'layer-open');\n    Util.addClass(layer, showClass);\n    if (onOpen) {\n      onOpen(this);\n    }\n  }\n\n  hide() {\n    const { onClose, showClass } = this.settings;\n\n    if (onClose) {\n      onClose(this);\n    }\n    \n    Util.removeClass(this.layer, showClass);\n    if (!document.querySelector('.' + showClass)) {\n      Util.removeClass(document.querySelector('html'), 'layer-open');\n    }\n  }\n\n  events() {\n    Util.on(this.layer, 'click', '[data-layer-close]', () => {\n      this.hide();\n    });\n  }\n}\n\nexport default Layer;\n","import Util from '../base/util.es6';\n\nclass Tag {\n  constructor(selector, options) {\n    const element = document.querySelector(selector);\n\n    if (!element) return;\n\n    const defaultSettings = {\n      className: '',\n      defaultValue: [],\n\n      inputType: 'text',\n\n      editable: true,\n\n      valueSelector: '.tag-values',\n\n      onDeleteFn: null,\n\n      max: null\n    };\n\n    this.settings = Object.assign({}, defaultSettings, options);\n    this.wrap = element;\n    this.init();\n  }\n\n  init() {\n    const { defaultValue, editable } = this.settings;\n\n    this.tags = [];\n    this.valueInput = document.querySelector(this.settings.valueSelector);\n\n    const list = Tag.createTagList();\n    const input = this.createInput();\n\n    this.wrap.appendChild(list);\n\n    if (editable) {\n      this.wrap.appendChild(input);\n    }\n\n    this.list = list;\n    this.input = input;\n\n    const value = this.valueInput.value ? this.valueInput.value.split(',') : defaultValue;\n\n    this.addTags(value);\n\n    this.events();\n  }\n\n  static createTagList() {\n    return Util.createElement('ul', { className: 'tag-list' });\n  }\n\n  createInput() {\n    const { inputType } = this.settings;\n\n    return Util.createElement('input', { type: inputType, className: 'tag-input' });\n  }\n\n  emptyTags() {\n    this.list.innerHTML = '';\n    this.tags = [];\n    this.addValueToInput();\n  }\n\n  /**\n   * @param {Array} values\n   * */\n  addTags(values) {\n    if (Array.isArray(values) && values.length) {\n      values.forEach(item => {\n        this.addTagValue(item);\n      });\n    }\n  }\n\n  /**\n   * @param {String} value\n   * */\n  addTagValue(value) {\n    const { max } = this.settings;\n    if (value\n      && (this.tags.indexOf(value) < 0)\n      && (max ? (this.tags.length < max) : true)) {\n      this.tags.push(value);\n      this.appendTag(value);\n      this.addValueToInput();\n    }\n\n    if (this.settings.editable) {\n      this.input.value = '';\n    }\n  }\n\n  appendTag(value) {\n    const item = Tag.createTagDom(value);\n\n    const div = document.createElement('div');\n\n    div.innerHTML = item;\n    this.list.appendChild(div.firstElementChild);\n  }\n\n  removeTagValue(value) {\n    const tags = this.tags;\n    const { onDeleteFn } = this.settings;\n    for (let i = 0, l = tags.length; i < l; i += 1) {\n      if (tags[i] === value) {\n        tags.splice(i, 1);\n\n        if (onDeleteFn) {\n          onDeleteFn(value, i);\n        }\n\n        return;\n      }\n    }\n  }\n\n  removeTag(element) {\n    const value = element.getAttribute('data-value');\n    this.removeTagValue(value);\n\n    const parent = element.parentNode;\n    this.wrap.querySelector('.tag-list').removeChild(parent);\n\n    this.addValueToInput();\n  }\n\n  addValueToInput() {\n    const valueInput = this.valueInput;\n\n    if (this.tags.length) {\n      valueInput.value = this.tags.join(',');\n    } else {\n      valueInput.value = '';\n    }\n\n    valueInput.trigger('change');\n  }\n\n  static createTagDom(value) {\n    return `<li class=\"tag\">${value}<a href=\"javascript:;\" data-value=\"${value}\" class=\"iconfont icon-times tag-delete\"></a></li>`;\n  }\n\n  events() {\n    const wrap = this.wrap;\n    const self = this;\n    const input = this.input;\n    const { editable } = this.settings;\n\n    Util.on(wrap, 'click', '.tag-delete', function () {\n      self.removeTag(this);\n    });\n\n    if (editable) {\n      wrap.addEventListener('click', function () {\n        self.input.focus();\n      }, 'false');\n    }\n\n    input.addEventListener('keydown', function (e) {\n      const code = e.keyCode;\n      const value = this.value.trim ? this.value.trim() : this.value;\n\n      if ((code === 13) || (code === 32)) {\n        e.preventDefault();\n        self.addTagValue(value);\n      }\n    });\n\n    input.addEventListener('blur', function (e) {\n      const value = this.value.trim ? this.value.trim() : this.value;\n\n      self.addTagValue(value);\n    });\n  }\n}\n\nexport default Tag;\n","import Util from '../base/util.es6';\n\nconst doc = document;\nconst docEle = doc.documentElement;\nconst body = doc.body;\n\nconst defaultSettings = {\n  chinese: '请填写中文',\n  date: '日期格式不正确',\n  email: '邮箱格式不正确',\n  english: '请填写字母',\n  idCard: '身份证号格式不正确',\n  mobile: '手机号格式不正确',\n  number: '请填写数字',\n  phone: '手机号格式不正确',\n  qq: 'qq格式不正确',\n  weChat: '微信格式不正确',\n  tel: '电话号码格式不正确',\n  time: '时间格式不正确',\n  url: '地址格式不正确',\n  required: '请填写该项',\n  int: '请填写不为0的正整数'\n};\n\nconst regs = {\n  rule: /^(.+?)\\((.+)\\)$/,\n  chinese: /^[\\u0391-\\uFFE5]+$/,\n  date: /^([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))$/,\n  /**\n   * @description 邮箱规则\n   * 1.邮箱以a-z、A-Z、0-9开头，最小长度为1.\n   * 2.如果左侧部分包含-、_、.则这些特殊符号的前面必须包一位数字或字母。\n   * 3.@符号是必填项\n   * 4.右则部分可分为两部分，第一部分为邮件提供商域名地址，第二部分为域名后缀，现已知的最短为2位。最长的为6为。\n   * 5.邮件提供商域可以包含特殊字符-、_、.\n   */\n  email: /^[a-zA-Z0-9]+([._\\\\-]*[a-zA-Z0-9])*@([a-zA-Z0-9]+[-a-zA-Z0-9]*[a-zA-Z0-9]+.){1,63}[a-zA-Z0-9]+$/,\n  english: /^[A-Za-z]+$/,\n  idCard: /^\\d{6}(19|2\\d)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|X)?$/,\n  int: /^[1-9][0-9]*$/,\n  /**\n   * @description phone 简化版\n   * */\n  mobile: /^1[3-9]\\d{9}$/,\n  number: /^[0-9]+$/,\n  qq: /^[1-9]\\d{4,}$/,\n  weChat: /^[-_a-zA-Z0-9]{4,24}$/,\n  url: /[a-zA-z]+:\\/\\/[^\\s]/,\n  tel: /^(?:(?:0\\d{2,3}[- ]?[1-9]\\d{6,7})|(?:[48]00[- ]?[1-9]\\d{6}))$/,\n  time: /^([01]\\d|2[0-3])(:[0-5]\\d){1,2}$/,\n  price: /^-?(([1-9]+\\d*)|([1-9]\\d*.\\d{0,2})|(0.\\d{0,2})|(0))$/,\n  password: /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,\n  /**\n   *@description\n   * 130、131、132、133、134、135、136、137、138、139\n   * 145、147\n   * 150、151、152、153、155、156、157、158、159\n   * 166 167\n   * 170、176、177、178\n   * 180、181、182、183、184、185、186、187、188、189\n   * 198 199 191 \n   * 国际码 如：中国(+86)\n   * 防止跟不上运营商开新数字，可以考虑使用mobile验证\n   */\n  phone: /^((\\+?[0-9]{1,4})|(\\(\\+86\\)))?(13[0-9]|14[579]|15[0-3,5-9]|16[67]|17[0135678]|18[0-9]|19[189])\\d{8}$/,\n  passport: /^((E|K)[0-9]{8})|(((SE)|(DE)|(PE)|(MA))[0-9]{7})$/\n};\n\nconst testReg = {\n  is_email(value) {\n    return value ? regs.email.test(value) : true;\n  },\n\n  is_english(value) {\n    return value ? regs.english.test(value) : true;\n  },\n\n  is_chinese(value) {\n    return value ? regs.chinese.test(value) : true;\n  },\n\n  is_number(value) {\n    return value ? regs.number.test(value) : true;\n  },\n\n  is_idCard(value) {\n    return value ? regs.idCard.test(value) : true;\n  },\n\n  is_int(value, rule, key, field) {\n    if (field.element.validity && field.element.validity.badInput) {\n      return false;\n    }\n    return value ? regs.int.test(value) : true;\n  },\n\n  is_mobile(value) {\n    return value ? regs.mobile.test(value) : true;\n  },\n\n  is_price(value) {\n    return value ? regs.price.test(value) : true;\n  },\n\n  is_qq(value) {\n    return value ? regs.qq.test(value) : true;\n  },\n\n  is_weChat(value) {\n    return value ? regs.weChat.test(value) : true;\n  },\n\n  is_tel(value) {\n    return value ? regs.tel.test(value) : true;\n  },\n\n  is_time(value) {\n    return value ? regs.time.test(value) : true;\n  },\n\n  is_passport(value) {\n    return value ? regs.passport.test(value) : true;\n  },\n\n  is_url(value) {\n    return value ? regs.url.test(value) : true;\n  },\n\n  is_required(value) {\n    return !!(value && (value !== '') && (value !== undefined));\n  },\n\n  is_reg(value, rule) {\n    const reg = new RegExp(rule.value);\n    return value ? reg.test(value) : true;\n  },\n\n  is_password(value) {\n    return value ? regs.password.test(value) : true;\n  },\n\n  is_not(value, rule) {\n    return value !== rule.value;\n  },\n\n  getCheckedCheckbox(element) {\n    let cl = 0;\n\n    [].slice.call(element).forEach(item => {\n      if (item.checked) {\n        cl += 1;\n      }\n    });\n\n    return cl;\n  },\n\n  is_max(value, rule, name, field) {\n    const { type, element } = field;\n    const max = rule.value;\n\n    if (type === 'checkbox') {\n      let cl = this.getCheckedCheckbox(element);\n\n      return cl <= max;\n    }\n\n    if (value) {\n      const l = value.length;\n      return l <= max;\n    }\n    return true;\n  },\n\n  is_min(value, rule, name, field) {\n    const { type, element } = field;\n\n    if (type === 'checkbox') {\n      let l = this.getCheckedCheckbox(element);\n\n      return l >= rule.value;\n    }\n\n    return value ? (value.length >= rule.value) : true;\n  },\n\n  is_phone(value) {\n    return value ? regs.phone.test(value) : true;\n  },\n\n  is_remote(value, rule, name, field, form) {\n    let url = rule.value;\n    let urlArr = url.split(',');\n    let data = {};\n\n    if (urlArr.length > 1) {\n      url = urlArr.shift();\n      let hasValue = true;\n      urlArr.forEach(item => {\n        const [itm, itemName, inputName] = item.replace(' ', '').match(/^(\\S*)\\[(\\S*)\\]$/);\n        const _value = form.querySelector(`[name=\"${inputName}\"]`).value;\n        data[itemName] = _value;\n        if (!_value.length) {\n          hasValue = false;\n        }\n      });\n\n      if (!hasValue) {\n        return false;\n      }\n    }\n    \n    const last = url.charAt(url.length - 1);\n\n    if (value) {\n      if (last === '=') {\n        return Util.fetchData(url + value, data);\n      }\n      return Util.fetchData(url, Object.assign({}, data, {\n        [field.element.name]: value\n      }));\n    }\n    return false;\n  },\n\n  is_same(value, rule) {\n    const ele = doc.querySelector(`[name=\"${rule.value}\"]`);\n    const eleValue = ele.value.trim();\n    return value === eleValue;\n  },\n\n  is_diff(value, rule, key, field, form) {\n    const ele = form.querySelector(`[name=\"${rule.value}\"]`);\n    const eleValue = ele.value.trim();\n    return value !== eleValue;\n  },\n\n  is_gt(value, rule) {\n    const ele = doc.querySelector(`[name=\"${rule.value}\"]`);\n    return Number(value) > Number(ele.value);\n  },\n\n  is_gte(value, rule) {\n    const ele = doc.querySelector(`[name=\"${rule.value}\"]`);\n    return Number(value) >= Number(ele.value);\n  },\n\n  is_gtnum(value, rule) { // great than number\n    if (value !== '') {\n      return Number(value) > Number(rule.value);\n    }\n    return true;\n  },\n\n  is_gtenum(value, rule) { // great than or equal\n    if (value !== '') {\n      return Number(value) >= Number(rule.value);\n    }\n    return true;\n  },\n\n  is_ltnum(value, rule) { // less than number\n    if (value !== '') {\n      return Number(value) < Number(rule.value);\n    }\n    return true;\n  },\n\n  is_ltenum(value, rule) { // less than or equal\n    if (value !== '') {\n      return Number(value) <= Number(rule.value);\n    }\n    return true;\n  }\n};\n\nclass Validator {\n  constructor(_selector, _fields, _settings, _callback, _errorCallback) {\n    let selector = _selector;\n    let fields = _fields;\n    let settings = _settings;\n    let callback = _callback;\n    let errorCallback = _errorCallback;\n\n    if (typeof _fields === 'function') { // (selector, callback, ..)\n      callback = _fields;\n      errorCallback = _settings;\n      fields = null;\n      settings = null;\n    } else if (typeof _settings === 'function') { // (selector, setting, callback, ..)\n      callback = _settings;\n      errorCallback = _callback;\n      fields = null;\n      settings = _fields;\n    }\n\n    let form = selector;\n\n    if (typeof selector === 'string') {\n      form = doc.querySelector(selector);\n    }\n\n    if (!form) {\n      return;\n    }\n\n    const options = {\n      wrapClass: '.ui-control-wrap',\n\n      validClass: '.v-item',\n\n      errorClass: 'error',\n      successClass: 'success',\n      loadClass: 'loading',\n\n      tipElement: 'span',\n      tipClass: 'v-error-tip',\n\n      showClass: 'show',\n\n      realTime: true,\n\n      shouldFresh: false,\n\n      scrollToError: false\n    };\n\n    this.settings = Object.assign({}, options, settings);\n\n    this.fields = {};\n\n    this.form = form;\n\n    if (fields) {\n      this.addFields(fields);\n    }\n\n    if (this.settings.realTime) {\n      this.delegateBlur();\n    }\n    \n    this.delegateFocus();\n\n    this.form.addEventListener('submit', e => {\n      e.preventDefault();\n\n      this.validAllFiles(callback, errorCallback);\n\n      return false;\n    });\n  }\n\n  validAllFiles(callback, errorCallback) {\n    const {\n      validClass, tipClass, showClass, shouldFresh \n    } = this.settings;\n\n    const items = this.form.querySelectorAll(validClass);\n    if (items) {\n      if (shouldFresh) {\n        this.fields = {};\n      }\n\n      this.addItems(items);\n    }\n\n    this.validForm();\n\n    let valid = true;\n    let arr = [];\n\n    Object.keys(this.fields).every(key => {\n      arr.push(key);\n      let item = this.fields[key];\n      if (!item.valid) {\n        valid = false;\n      }\n      return item.valid;\n    });\n\n    const { fields: __fields, form: __form, settings: __settings } = this;\n\n    function cb() {\n      if (valid) {\n        if (typeof callback === 'function') {\n          callback(__form, __fields);\n        }\n      } else {\n        if (__settings.scrollToError) {\n          const tipElement = doc.querySelector('.' + tipClass + '.' + showClass);\n\n          if (tipElement) {\n            const top = (tipElement.getBoundingClientRect().top - 80)\n              + (docEle.scrollTop + body.scrollTop);\n            const left = docEle.scrollLeft + body.scrollLeft;\n\n            // scroll to error tip position\n            window.scrollTo(left, top);\n          }\n        }\n\n        if (typeof errorCallback === 'function') {\n          errorCallback(__form, __fields);\n        }\n      }\n    }\n    \n    function checkValid(index) {\n      if (index >= arr.length) {\n        valid = true;\n        cb();\n        return;\n      }\n      const item = __fields[arr[index]];\n      if (item.remote) {\n        item.remote.then(res => {\n          if (res.code === 200) {\n            checkValid(index + 1);\n          } else {\n            valid = false;\n            cb();\n          }\n        });\n      } else if (!item.valid) {\n        valid = false;\n        cb();\n      } else {\n        checkValid(index + 1);\n      }\n    }\n    \n    checkValid(0);\n  }\n\n  static getAttrChecked(element, attr) {\n    if (element.length > 0 && Validator.isRadioOrCheckbox(element[0].type)) {\n      for (let i = 0, l = element.length; i < l; i += 1) {\n        if (element[i].checked) {\n          return element[i][attr];\n        }\n      }\n      return false;\n    }\n    return element[attr];\n  }\n\n  // check if element is 'radio' or 'checkbox'\n  static isRadioOrCheckbox(type) {\n    return type === 'radio' || type === 'checkbox';\n  }\n\n  /**\n   * @method\n   * @param {Array} fields\n   * [{\n   *   name,   // element [name]\n   *   rules,  // valid rule\n   *   msgs    // error message\n   * }]\n   * */\n  addFields(fields) {\n    const { validClass, realTime } = this.settings;\n    for (let i = 0, l = fields.length; i < l; i += 1) {\n      const field = fields[i];\n      const name = field.name;\n      const rules = Validator.rulesToObject(field.rules, field.msgs);\n      const element = this.form[name];\n      const type = element.length > 0 ? (element.type || element[0].type) : element.type;\n      const tip = this.createErrorTip(element);\n      const fieldItem = {\n        element,\n        name,\n        type,\n        rules,\n        tip,\n        value: null,\n        checked: null,\n        fn: field.fn || null\n      };\n\n      this.fields[name] = fieldItem;\n\n      if (!Util.hasClass(element, validClass.replace('.', ''))) {\n        if (realTime) {\n          this.addBlurEvent(fieldItem);\n          this.addFocusEvent(fieldItem);\n        }\n      }\n    }\n  }\n\n  /**\n   * @method\n   * create error tip element\n   * @param  {Node|NodeList} [node] - elements\n   * @returns {Node}\n   * */\n  createErrorTip(node) {\n    let element = node.length > 1 ? node[0] : node;\n    const { tipElement, wrapClass, tipClass } = this.settings;\n    const parent = element.closest(wrapClass);\n    const addedClass = element.id ? ` v-tip-${element.id}` : '';\n\n    let tip;\n\n    if (element.getAttribute('data-tip')) {\n      tip = document.querySelector(element.getAttribute('data-tip'));\n\n      return tip;\n    } else if (parent.querySelector(`.${tipClass}`)) {\n      tip = parent.querySelector(`.${tipClass}`);\n\n      return tip;\n    }\n\n    // create new tip element\n    tip = doc.createElement(tipElement);\n    tip.className = `${tipClass}${addedClass}`;\n\n    return parent.appendChild(tip);\n  }\n\n  /**\n   * @method\n   * get rule and msg from element node\n   * @param  {NodeList} items nodeList of form item\n   * */\n  addItems(items) {\n    const fields = [];\n\n    [].slice.call(items).forEach(element => {\n      if (!(element.name in this.fields)) {\n        const filed = this.addItem(element);\n        if (filed) {\n          fields.push(filed);\n        }\n      }\n    });\n\n    this.addFields(fields);\n  }\n\n  /**\n   * @static\n   * get name & rules & error messages from form element\n   * @param {HTMLFormElement} element\n   * @returns {Object|Boolean} field or nothing\n   * */\n  addItem(element) {\n    const name = element.name;\n    const elements = this.form[name];\n    let ele = elements;\n\n    if (elements.length > 0) {\n      // select radio checkbox\n      if (Validator.isRadioOrCheckbox(elements[0].type)) {\n        ele = elements[0];\n      }\n    }\n\n    const rules = ele.getAttribute('data-rules');\n    const msgs = ele.getAttribute('data-msgs') || '';\n\n    return (name && rules) ? { name, rules, msgs } : false;\n  }\n\n  /**\n   * @method\n   * @param {string} rules [form item valid rule]\n   * @param {string} msgs  [error message]\n   * @returns {object}\n   * */\n  static rulesToObject(rules, msgs) {\n    const rulesArray = rules.split('|');\n    const rulesObject = {};\n    const msgArray = msgs ? msgs.split('|') : '';\n\n    rulesArray.forEach((item, index) => {\n      const r = item.match(regs.rule);\n      let ruleName;\n      let ruleValue;\n      let ruleMsg;\n\n      if (r) {\n        ruleName = r[1];\n        ruleValue = r[2];\n      } else {\n        ruleName = item;\n      }\n\n      ruleMsg = msgArray[index] || defaultSettings[ruleName] || '';\n\n      rulesObject[ruleName] = {\n        value: ruleValue,\n        msg: ruleMsg\n      };\n    });\n\n    return rulesObject;\n  }\n\n  // trigger verify when element loose focus\n  addBlurEvent(field) {\n    if (!Validator.isRadioOrCheckbox(field.type)) {\n      field.element.addEventListener('blur', () => {\n        this.validField(field);\n      });\n    }\n  }\n\n  // remove error class when element get focus\n  addFocusEvent(field) {\n    const { element, tip, type } = field;\n    if (Validator.isRadioOrCheckbox(type) && element.length > 1) {\n      [].slice.call(element).forEach(item => this.addFocus(item, tip));\n    } else {\n      this.addFocus(element, tip);\n    }\n  }\n\n  addFocus(element, tip) {\n    const self = this;\n    element.addEventListener('focus', function () {\n      self.removeErrorClass(this, tip);\n    });\n  }\n\n  /**\n   * @method\n   * delegate event\n   * - focusin for normal form elements\n   * - change for hidden form elements\n   * */\n  delegateFocus() {\n    const { validClass } = this.settings;\n    const form = this.form;\n    Util.on(form, 'focusin change', validClass, e => {\n      const target = e.target;\n      const name = target.name;\n      // if (_.has(this.fields, name)) {\n      if (name in this.fields) {\n        const field = this.fields[name];\n        this.removeErrorClass(target, field.tip);\n      }\n    });\n  }\n\n  /**\n   * @method\n   * remove error style class\n   * @param {HTMLElement} target - form element\n   * @param {HTMLElement} tip - error tip element\n   * */\n  removeErrorClass(target, tip) {\n    const { showClass, errorClass, wrapClass, successClass } = this.settings;\n    const tipEle = tip;\n\n    Util.removeClass(target, errorClass);\n    Util.removeClass(tip, showClass);\n    tipEle.innerText = '';\n\n    if (target.closest && target.closest(wrapClass)) {\n      Util.removeClass(target.closest(wrapClass), errorClass);\n      Util.removeClass(target.closest(wrapClass), successClass);\n    }\n  }\n\n  /**\n   * @method\n   * add loading class for remote item\n   * @param {HTMLElement} target - form element\n   * */\n  addLoadClass(target) {\n    const { loadClass, wrapClass } = this.settings;\n\n    Util.addClass(target, loadClass);\n\n    if (target.closest && target.closest(wrapClass)) {\n      Util.addClass(target.closest(wrapClass), loadClass);\n    }\n  }\n\n  /**\n   * @method\n   * remove loading class for remote item\n   * @param {HTMLElement} target - form element\n   * */\n  removeLoadClass(target) {\n    const { loadClass, wrapClass } = this.settings;\n\n    Util.removeClass(target, loadClass);\n\n    if (target.closest && target.closest(wrapClass)) {\n      Util.removeClass(target.closest(wrapClass), loadClass);\n    }\n  }\n\n  // delegate focusout event\n  delegateBlur() {\n    Util.on(this.form, 'focusout', this.settings.validClass, (e) => {\n      if (this.fields === null) return;\n      const target = e.target;\n      const name = target.name;\n      if (!(name in this.fields)) {\n        const item = this.addItem(target);\n        this.addFields([item]);\n      }\n      const field = this.fields[name];\n      if (!Validator.isRadioOrCheckbox(field.type)) {\n        this.validField(field);\n      }\n    });\n  }\n\n  validForm() {\n    const arr = [];\n    for (let i in this.fields) {\n      if (Object.hasOwnProperty.call(this.fields, i)) {\n        arr.push(i);\n        const field = this.fields[i];\n        this.validField(field, 'final');\n      }\n    }\n  }\n\n  /**\n   * @method\n   * verify single filed\n   * @param {object} fieldItem\n   * @param {String} type\n   * {\n        element,\n        name,\n        type,\n        rules,\n        tip,\n        value,\n        checked,\n        remote,\n        remoteOk\n      }\n   * */\n  validField(fieldItem, type = '') {\n    const field = fieldItem;\n    const { element, rules, tip } = field;\n\n    // for 'checkbox' and 'radio'\n    field.checked = Validator.getAttrChecked(element, 'checked');\n    field.value = Validator.isRadioOrCheckbox(field.type) ? field.checked : element.value;\n\n    Object.keys(rules).every((key) => {\n      const rule = rules[key];\n      const value = field.value.trim ? field.value.trim() : field.value;\n\n      if ((key === 'remote') && (type === 'final') && (field.remote && field.remoteOk)) {\n        return false;\n      }\n\n      const validResult = testReg[`is_${key}`](value, rule, key, field, this.form);\n\n      if (typeof validResult === 'boolean') {\n        if (!validResult) {\n          this.showErrorTip(element, tip, rule.msg);\n          field.valid = false;\n          return false;\n        }\n      } else if (key === 'remote') {\n        // self.addLoadClass(element);\n\n        field.valid = true;\n        field.remote = validResult;\n        field.remoteOk = false;\n\n        validResult.then(res => {\n          // self.removeLoadClass(element);\n\n          if (res.code === 200) {\n            field.valid = true;\n            this.showSuccessTip(element);\n          } else {\n            field.valid = false;\n            this.showErrorTip(element, tip, res.msg || rule.msg);\n          }\n          \n          field.remoteOk = true;\n        });\n\n        return true;\n      }\n\n      field.valid = true;\n      return true;\n    });\n\n    if (field.fn && (typeof field.fn === 'function')) {\n      field.fn(this, field);\n    }\n  }\n\n  /**\n   * @method\n   * show error tip element\n   * @param {HTMLFormElement} element - form element\n   * @param {HTMLElement} tip - error tip element\n   * @param {String} message - error message\n   * */\n  showErrorTip(element, tip, message) {\n    const { errorClass, wrapClass } = this.settings;\n    const tipElement = tip;\n    tipElement.innerHTML = message;\n    Util.addClass(tipElement, 'show');\n    Util.addClass(element, errorClass);\n\n    if (element.closest && element.closest(wrapClass)) {\n      Util.addClass(element.closest(wrapClass), errorClass);\n    }\n  }\n\n  showSuccessTip(element) {\n    const { successClass, wrapClass } = this.settings;\n    if (element.closest && element.closest(wrapClass)) {\n      Util.addClass(element.closest(wrapClass), successClass);\n    }\n  }\n\n  destroy() {\n    this.form = null;\n    this.fields = null;\n  }\n}\n\nexport default Validator;\n\n","function isObject(obj) {\n  return ((typeof obj === 'object') && (obj !== null));\n}\n\nlet errorMessage = {\n  InternalError: '上传错误',\n  InvalidFileExtensionError: '文件格式不正确',\n  InvalidFileTypeError: '文件格式不正确',\n  MaxFileSizeError: '文件过大',\n  RequestError: '上传失败',\n  UnsupportedError: '浏览器不支持此种上传',\n  MultipleUnsupportedError: '不支持多文件上传'\n};\n\nclass Upload {\n  constructor(url, input, options) {\n    const defaultSettings = {\n      files: null,\n      limit: 0, // 一次能同时添加的数量\n      maxSize: 0,\n      data: {},\n\n      fileType: [], // 例 ['.jpeg', '.png', '.gif']\n\n      fileName: 'file', // upload key\n\n      dataType: 'json',\n\n      maxUploads: 1000, // 假定系统能支持的上传数量\n      \n      beforeInit: null,\n      init: null,\n      start() { return true; },\n      beforeUploadStart: null,\n      beforeUpload: null,\n      progress: null,\n      success: null,\n      error: null,\n      cancel: null,\n      complete: null,\n      finish: null\n    };\n\n    this.settings = Object.assign({}, defaultSettings, options);\n\n    this.uploads = [];\n    this.uploadContexts = []; // 保存的所有添加进来的文件\n    this._uploadData = [];\n    this.queuedFilesCount = 0;\n    this.activeUploads = 0;\n    this.ajaxUrl = url;\n\n    if (this.settings.beforeInit) {\n      this.settings.beforeInit((next) => {\n        if (next) {\n          this.create(input);\n        }\n      });\n    } else {\n      this.create(input);\n    }\n  }\n\n  create(element) {\n    const { files, fileName } = this.settings;\n    let input = element;\n    \n    if (!isObject(input) && !files) return;\n\n    if (isObject(input) && input.length > 1) {\n      input = input[0];\n    }\n\n    let name = (input && input.name);\n    if (fileName) {\n      name = fileName;\n    }\n    let _files = files || input.files;\n\n    this.fileName = name;\n    this.files = _files;\n    this.input = input;\n    \n    let fileNum = this.countFileNum();\n    this.fileNum = fileNum;\n\n    if (fileNum > 0) {\n      // 初始化保存上传文件信息\n      this.initUploadContext(fileNum, _files, input);\n\n      // 考虑是否需要init回调限制上传数量\n\n      const remaining = this.initRemaining();\n      this.remaining = remaining; // array of file index\n\n      if (remaining.length) {\n        this.queuedFilesCount = remaining.length;\n        this.activeUploads = remaining.length;\n\n        this.queueUpload(remaining);\n\n        this.beforeUploadStart();\n      } else {\n        this.uploadContexts.forEach((item, index) => {\n          this.setUploadState(index, 4);\n        });\n        this.finish();\n      }\n    } else {\n      this.finish();\n    }\n  }\n\n  countFileNum() {\n    const { files, input } = this;\n    const { limit } = this.settings;\n\n    if (files && files.length) {\n      return (limit <= 0) ? files.length : Math.min(limit, files.length);\n    }\n\n    if (input.value) return 1;\n    return 0;\n  }\n\n  static createId() {\n    return 'id' + (Number(Math.random().toString().substr(3, 3) + Date.now()).toString(36));\n  }\n\n  initUploadContext(fileNum, files, input) {\n    const { uploadContexts, _uploadData } = this;\n\n    [...Array(fileNum)].forEach((itm, i) => {\n      const id = Upload.createId();\n      _uploadData[i] = {\n        state: 0,\n        id,\n        xhr: null\n      };\n      \n      uploadContexts[i] = {\n        index: i,\n        id,\n        state: 'init',\n        file: (files !== null ? files[i] : {\n          name: input.value.split(/(\\\\|\\/)/g).pop()\n        }),\n        cancel() {\n          const state = this.getUploadState(i);\n          if (state === 0) {\n            this.setUploadState(i, 4);\n          } else if (state === 1) {\n            this.setUploadState(i, 4);\n            const data = _uploadData[i];\n\n            if (data.xhr !== null) {\n              data.xhr.abort();\n              data.xhr = null;\n            }\n\n            this.cancel(i);\n          } else {\n            return false;\n          }\n\n          return true;\n        }\n      };\n    });\n  }\n\n  getUploadState(num) {\n    return this._uploadData[num].state;\n  }\n\n  /**\n   * \n   * @param num {number} file index\n   * @param state {number} file state\n   */ \n  setUploadState(num, state) {\n    const stateText = {\n      0: 'init',\n      1: 'uploading',\n      2: 'success',\n      3: 'error',\n      4: 'cancel'\n    };\n\n    this._uploadData[num].state = state;\n    this.uploadContexts[num].state = stateText[state];\n  }\n\n  initRemaining() {\n    const fileNum = this.fileNum;\n    let remaining = [];\n\n    for (let i = 0; i < fileNum; i += 1) {\n      if (this.init(i) !== false) {\n        remaining.push(i);\n      }\n    }\n\n    return remaining;\n  }\n\n  /**\n   * \n   * @param remaining {array} file index array\n   */ \n  queueUpload(remaining) {\n    let result = []; // 文件类型和大小合法的文件index\n    remaining.forEach((item) => {\n      if (this.validFile(item)) {\n        if (this.start(item)) {\n          result.push(item);\n        }\n      }\n    });\n\n    if (result.length) {\n      this.uploads.push(result); // [1,3,4,5...]\n    }\n  }\n\n  static getFileExtension(filename) {\n    let dotPos = filename.lastIndexOf('.');\n    return (dotPos !== -1) ? filename.substr(dotPos).toLowerCase() : '';\n  }\n\n  static validateFileSize(maxSize, file) {\n    if (file) {\n      let { size } = file;\n      if (size && typeof size === 'number') {\n        return size <= maxSize;\n      }\n    }\n\n    return true;\n  }\n\n  validateFileExtension(file) {\n    const validExtension = this.settings.fileType;\n    const input = this.input;\n    \n    if (file && file.name) {\n      const name = Upload.getFileExtension(file.name);\n      return validExtension.lastIndexOf(name) > -1;\n    }\n    \n    if (isObject(input) && input.value) {\n      const _name = Upload.getFileExtension(input.value);\n      return validExtension.lastIndexOf(_name) > -1;\n    } \n\n    return true; // can't valid // or return false ?\n  }\n\n  validFile(num) {\n    const { input, files } = this;\n    const { fileType, maxSize } = this.settings;\n    let file;\n    if (this.getUploadState(num) !== 1) return false;\n\n    if (files !== null) {\n      if (files[num]) {\n        file = files[num];\n      } else {\n        this.error(num, 'InternalError');\n        return false;\n      }\n    } else if (!input.value) {\n      this.error(num, 'InternalError');\n      return false;\n    }\n\n    if (fileType.length && !this.validateFileExtension(file)) {\n      this.error(num, 'InvalidFileExtensionError');\n      return false;\n    }\n    \n    if (maxSize > 0 && !Upload.validateFileSize(maxSize, file)) {\n      this.error(num, 'InvalidFileExtensionError');\n      return false;\n    }\n\n    return true;\n  }\n\n  init(num) {\n    const { init } = this.settings;\n\n    if (this.getUploadState(num) > 0) {\n      return false;\n    }\n\n    if (init) {\n      if (init.call(this.uploadContexts[num]) === false) {\n        this.setUploadState(num, 4);\n        return false;\n      }\n    }\n\n    this.setUploadState(num, 1);\n\n    return true;\n  }\n\n  start(num) {\n    const { start } = this.settings;\n\n    if (start) {\n      if (start.call(this.uploadContexts[num]) === false) {\n        this.setUploadState(num, 4);\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  beforeUploadStart() {\n    const { beforeUploadStart } = this.settings;\n    if (beforeUploadStart) {\n      beforeUploadStart(this.uploadContexts, (next) => {\n        if (next) {\n          this.uploadNext();\n        }\n      });\n    } else {\n      this.uploadNext();\n    }\n  }\n\n  uploadNext() {\n    const { maxUploads, beforeUpload, data } = this.settings;\n    const self = this;\n    \n    if (this.uploads.length && (this.activeUploads < maxUploads)) {\n      let upload = this.uploads[0];\n      let uploadNum = upload.shift();\n\n      if (!upload.length) {\n        this.uploads.shift();\n      }\n\n      if (beforeUpload) {\n        beforeUpload.call(this.uploadContexts[uploadNum], uploadNum, (next, _data) => {\n          if (next) {\n            self.uploadFile(uploadNum, _data || data);\n          }\n        });\n      } else {\n        this.uploadFile(uploadNum, data);\n      }\n\n      if (this.uploads.length) {\n        this.uploadNext();\n      }\n    }\n  }\n\n  objectToFormData(formData, obj, parent) {\n    Object.keys(obj).forEach(key => {\n      const item = obj[key];\n      const k = !parent ? key : `${parent}[${key}]`;\n    \n      if (!item) {\n        formData.append(k, '');\n      } else if (typeof item === 'object') {\n        this.objectToFormData(formData, item, k);\n      } else {\n        formData.append(k, item.toString());\n      }\n    });\n  }\n\n  uploadFile(num, data) {\n    if (this.getUploadState(num) !== 1) return;\n    const { files, fileName } = this;\n    const self = this;\n\n    if (files !== null) {\n      let file = files[num];\n      let formData = new FormData();\n\n      this.objectToFormData(formData, data);\n\n      formData.append(fileName, file);\n\n      const _xhr = new XMLHttpRequest();\n\n      _xhr.addEventListener('error', function (xhr) {\n        self._uploadData[num].xhr = null;\n        self.error(num, {\n          name: 'RequestError',\n          message: errorMessage.RequestError,\n          xhr: xhr\n        });\n      }, false);\n\n      _xhr.upload.addEventListener('progress', function (e) {\n        if (e.lengthComputable) {\n          self.progress(num, (e.loaded / e.total) * 100);\n        }\n      }, false);\n\n      _xhr.addEventListener('load', function () {\n        if (_xhr.status === 200) {\n          self._uploadData[num].xhr = null;\n\n          self.progress(num, 100);\n          self.success(num, _xhr.responseText);\n        }\n      }, false);\n\n      _xhr.open('POST', this.ajaxUrl, true);\n      _xhr.send(formData);\n    } else {\n      this.error(num, 'InternalError');\n    }\n  }\n\n  progress(num, pro) {\n    const { progress } = this.settings;\n\n    if (this.getUploadState(num) === 1) {\n      if (progress) {\n        progress.call(this.uploadContexts[num], pro);\n      }\n    }\n  }\n\n  success(num, data) {\n    const { success, dataType } = this.settings;\n    let _data = data;\n\n    if (this.getUploadState(num) === 1) {\n      this.setUploadState(num, 2);\n    }\n\n    if (success) {\n      if (dataType === 'json') {\n        try {\n          _data = JSON.parse(data);\n        } catch (e) {\n          throw new Error(e);\n        }\n      }\n      success.call(this.uploadContexts[num], _data);\n    }\n\n    this.fileComplete(num, 'success');\n  }\n\n  error(num, err) {\n    const { error } = this.settings;\n    let errObj = err;\n\n    if (typeof err === 'string') {\n      errObj = {\n        name: err,\n        message: errorMessage[err]\n      };\n    }\n\n    if (this.getUploadState(num) === 1) {\n      this.setUploadState(num, 3);\n\n      if (error) {\n        error.call(this.uploadContexts[num], errObj);\n      }\n\n      this.fileComplete(num, 'error');\n    }\n  }\n\n  /**\n   * 单个文件上传结束\n   * @param num {number} file index\n   * @param status {string} file status\n   */\n  complete(num, status) {\n    const { complete } = this.settings;\n    \n    if (complete) {\n      complete.call(this.uploadContexts[num], status);\n      // status如果和uploadContexts里的一致可以删除\n    }\n  }\n\n  /**\n   * 单个文件取消上传 -> 文件上传结束\n   * @param num {number} file index\n   * */ \n  cancel(num) {\n    const { cancel } = this.settings;\n\n    if (cancel) {\n      cancel.call(this.uploadContexts[num]);\n    }\n\n    this.fileComplete(num, 'cancel');\n  }\n\n  /**\n   * @param num {number} file index\n   * @param status {string}\n   * */ \n  fileComplete(num, status) {\n    this.complete(num, status);\n\n    this.queuedFilesCount -= 1;\n\n    if (this.queuedFilesCount === 0) {\n      this.finish();\n    }\n    \n    this.activeUploads -= 1;\n  }\n  \n  // 整个上传结束\n  finish() {\n    const { finish } = this.settings;\n    if (finish) {\n      finish.call(this.uploadContexts);\n    }\n  }\n}\n\nexport default Upload;\n","import u from '../base/util.es6';\nimport Upload from './Upload.es6';\n\n// move this js file to common\n\nclass UploadHelper {\n  constructor(selector, options) {\n    const defaultSettings = {\n      url: ''\n    };\n\n    this.settings = Object.assign({}, defaultSettings, options);\n\n    this.init(selector);\n  }\n\n  init(selector) {\n    let element = selector;\n\n    if (typeof selector === 'string') {\n      element = document.querySelector(selector);\n    }\n\n    if (!element) return;\n\n    const input = element.querySelector('input[type=\"file\"]');\n\n    this.wrap = element;\n    this.input = input;\n\n    if (element.hasAttribute('data-drag')) {\n      this.dragEvents();\n    }\n\n    if (input.hasAttribute('accept')) {\n      this.settings.fileType = input.getAttribute('accept').split(',');\n    }\n\n    if (u.hasClass(element, 'ui-upload-img')) {\n      this.singleUpload();\n    }\n\n    this.inputEvent();\n  }\n\n  createUpload(input) {\n    const { url } = this.settings;\n\n    new Upload(url, input, this.settings);\n\n    // input.value = ''; // eslint-disable-line\n  }\n\n  singleUpload() {\n    const { wrap } = this;\n    const trigger = wrap.querySelector('.trigger');\n    const image = wrap.querySelector('.image');\n    const self = this;\n\n    u.on(wrap, 'click', '.js-clean', function () {\n      u.removeClass(trigger, 'hidden');\n      u.addClass(image, 'hidden');\n      image.innerHTML = '';\n      self.input.value = '';\n    });\n  }\n\n  inputEvent() {\n    const { input } = this;\n    const self = this;\n\n    input.addEventListener('change', function () {\n      self.createUpload(this);\n    });\n  }\n\n  dragEvents() {\n    const { wrap } = this;\n    const self = this;\n\n    wrap.addEventListener('dragenter', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      u.addClass(this, 'highlight');\n    }, false);\n\n    wrap.addEventListener('dragleave', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      u.removeClass(this, 'highlight');\n    }, false);\n\n    wrap.addEventListener('dragover', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      u.addClass(this, 'highlight');\n    }, false);\n\n    wrap.addEventListener('drop', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      u.removeClass(this, 'highlight');\n      \n      const files = e.dataTransfer.files;\n\n      self.createUpload(files);\n    }, false);\n  }\n}\n\nexport default function (selector, options) {\n  if (typeof selector === 'string') {\n    const element = document.querySelectorAll(selector);\n    u.forEach(element, item => {\n      new UploadHelper(item, options);\n    });\n    return;\n  }\n  \n  if (typeof selector === 'object') {\n    if (selector.length) {\n      u.forEach(selector, item => {\n        new UploadHelper(item, options);\n      });\n      return;\n    }\n    new UploadHelper(selector, options);\n  }\n}\n","import './polyfill/promise-polyfill.js';\nimport './polyfill/fetch-polyfill.js';\n\nimport './script/base/polyfill.es6';\nimport util from './script/base/util.es6';\n\nimport InputCount from './script/form/InputCount.es6';\nimport PikaEx from './script/form/PikaEx.es6';\nimport CheckAll from './script/form/CheckAll.es6';\nimport Transfer from './script/form/Transfer.es6';\n\nimport Select from './script/select/Select.es6';\nimport Cascader from './script/select/Cascader.es6';\n\nimport Modal from './script/modal/Modal.es6';\nimport Message from './script/modal/Message.es6';\nimport Tooltip from './script/modal/Tooltip.es6';\nimport Popper from './script/modal/Popper.es6';\nimport Layer from './script/modal/Layer.es6';\nimport Position from './script/modal/Position.es6';\n\nimport Tag from './script/tag/Tag.es6';\n\nimport Validator from './script/validator/Validator.es6';\n\nimport Upload from './script/upload/Upload.es6';\nimport UploadHelper from './script/upload/UploadHelper.es6';\n  \nwindow.ui = {\n  util,\n  Select,\n  Cascader,\n  CheckAll,\n  Modal,\n  Message,\n  Tooltip,\n  InputCount,\n  Tag,\n  Validator,\n  Upload,\n  Popper,\n  Layer,\n  PikaEx,\n  UploadHelper,\n  Transfer,\n  Position\n};\n\nutil.on(document, 'click', '[data-closeable]', function (e) {\n  const node = this;\n  if (util.hasClass(e.target, 'icon-times')) {\n    node.parentNode.removeChild(node);\n  }\n});\n\nutil.on(document, 'click', '.node-trigger', function () {\n  util.toggleClass(this, 'expend');\n});  \n\nif (!util.supportPseudo(':focus-within')) {\n  util.on(document, 'focusin', '.ui-icon-input input', function () {\n    util.addClass(this.closest('.ui-icon-input'), 'active');\n  }); \n  \n  util.on(document, 'focusout', '.ui-icon-input input', function () {\n    util.removeClass(this.closest('.ui-icon-input'), 'active');\n  });\n} \n\n"]}